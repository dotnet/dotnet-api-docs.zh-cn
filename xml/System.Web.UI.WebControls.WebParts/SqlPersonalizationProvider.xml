<Type Name="SqlPersonalizationProvider" FullName="System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider">
  <Metadata><Meta Name="ms.openlocfilehash" Value="e40aa703d525bbdd6f4d1071a5b8a248fbb54fc2" /><Meta Name="ms.sourcegitcommit" Value="b53d35b4a410c949742abd4c6a989d1af5357bca" /><Meta Name="ms.translationtype" Value="MT" /><Meta Name="ms.contentlocale" Value="zh-CN" /><Meta Name="ms.lasthandoff" Value="07/21/2020" /><Meta Name="ms.locfileid" Value="86628314" /></Metadata><TypeSignature Language="C#" Value="public class SqlPersonalizationProvider : System.Web.UI.WebControls.WebParts.PersonalizationProvider" />
  <TypeSignature Language="ILAsm" Value=".class public auto ansi beforefieldinit SqlPersonalizationProvider extends System.Web.UI.WebControls.WebParts.PersonalizationProvider" />
  <TypeSignature Language="DocId" Value="T:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider" />
  <TypeSignature Language="VB.NET" Value="Public Class SqlPersonalizationProvider&#xA;Inherits PersonalizationProvider" />
  <TypeSignature Language="C++ CLI" Value="public ref class SqlPersonalizationProvider : System::Web::UI::WebControls::WebParts::PersonalizationProvider" />
  <TypeSignature Language="F#" Value="type SqlPersonalizationProvider = class&#xA;    inherit PersonalizationProvider" />
  <AssemblyInfo>
    <AssemblyName>System.Web</AssemblyName>
    <AssemblyVersion>2.0.0.0</AssemblyVersion>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <Base>
    <BaseTypeName>System.Web.UI.WebControls.WebParts.PersonalizationProvider</BaseTypeName>
  </Base>
  <Interfaces />
  <Docs>
    <summary>实现一个使用 Microsoft SQL Server 的个性化设置提供程序。</summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
 此类定义使用 Microsoft SQL Server 的个性化设置提供程序所需的功能。 个性化设置提供程序代表实例加载和存储个性化数据 <xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization> 。 此类实现用于读取和写入运行 SQL Server 的计算机的逻辑，还实现中定义的所有抽象方法 <xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider> 。 有关个性化设置提供程序的详细信息，请参阅 <xref:System.Web.UI.WebControls.WebParts.PersonalizationProvider> 。  
  
 使用 SQL Server 的 Web 部件个性化的数据设计依赖于是否存在两个常见的 SQL 数据库表及其支持的存储过程，它们对于大多数基于 SQL 的功能实现都是共享的。 使用以下脚本安装和卸载这些表和视图：  
  
-   installpagepersonalization-安装个性化表、视图和相关的存储过程。  
  
-   uninstallpagepersonalization-卸载个性化表、视图和相关的存储过程。  
  
 需要注意的是，如果您的 Web 应用程序不是以默认信任级别或更高级别运行，个性化设置将失败 <xref:System.Web.AspNetHostingPermissionLevel.Medium> (您可以使用元素) 在 Web.config 文件中设置自定义信任级别 `<trust level="" />` 。 <xref:System.Web.UI.WebControls.WebParts.PersonalizationAdministration>和 <xref:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider> 类都在初始化时检查的信任级别 <xref:System.Web.AspNetHostingPermissionLevel.Low> 。 如果将应用程序配置为在信任级别运行 <xref:System.Web.AspNetHostingPermissionLevel.Low> ，并使用默认 <xref:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider> 提供程序来管理应用程序的个性化设置数据，则该应用程序首次尝试访问个性化设置数据时将失败，因为在信任中运行的 ASP.NET 工作进程 <xref:System.Web.AspNetHostingPermissionLevel.Low> 不具有调用命名空间中的各个类所必需的权限 <xref:System.Data.SqlClient> 。  
  
 ]]></format>
    </remarks>
    <altmember cref="T:System.Web.UI.WebControls.WebParts.PersonalizationProvider" />
    <related type="Article" href="https://docs.microsoft.com/previous-versions/aspnet/e0s9t4ck(v=vs.100)">ASP.NET Web 部件控件</related>
    <related type="Article" href="https://docs.microsoft.com/previous-versions/aspnet/z36h8be9(v=vs.100)">Web 部件个性化概述</related>
    <related type="Article" href="https://docs.microsoft.com/previous-versions/aspnet/784d8z92(v=vs.100)">演练：使用用户控件实现 Web 部件个性化设置</related>
    <related type="Article" href="https://docs.microsoft.com/previous-versions/aspnet/ms178182(v=vs.100)">Web 部件个性化</related>
  </Docs>
  <Members>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public SqlPersonalizationProvider ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider.#ctor" />
      <MemberSignature Language="VB.NET" Value="Public Sub New ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; SqlPersonalizationProvider();" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName Language="C#">[System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")]</AttributeName>
          <AttributeName Language="F#">[&lt;System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")&gt;]</AttributeName>
        </Attribute>
      </Attributes>
      <Parameters />
      <Docs>
        <summary>初始化 <see cref="T:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider" /> 类的新实例。</summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <xref:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider.%23ctor%2A>构造函数由 ASP.NET 调用，以创建 <xref:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider> 在应用程序的配置中指定的类的实例。 不应在代码中使用此构造函数。  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="ApplicationName">
      <MemberSignature Language="C#" Value="public override string ApplicationName { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string ApplicationName" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider.ApplicationName" />
      <MemberSignature Language="VB.NET" Value="Public Overrides Property ApplicationName As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; virtual property System::String ^ ApplicationName { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.ApplicationName : string with get, set" Usage="System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider.ApplicationName" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary>获取或设置要存储和检索其个性化设置信息的应用程序的名称。</summary>
        <value>要存储和检索其个性化设置信息的应用程序的名称。 默认值为当前 <see cref="P:System.Web.Hosting.HostingEnvironment.ApplicationVirtualPath" /> 的 <see cref="P:System.Web.HttpContext.Request" /> 属性值。</value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <xref:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider.ApplicationName%2A>类使用属性 <xref:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider> 对用户信息进行分组。 通过使用应用程序名称限定用户信息，你可以将多个应用程序的信息存储在单个数据库中，而不会在重复用户名之间发生冲突。 另外，多个 ASP.NET 应用程序可以通过在属性中指定相同的值，来使用相同的用户数据库 <xref:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider.ApplicationName%2A> 。 <xref:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider.ApplicationName%2A>可以通过编程方式设置该属性，也可以使用部分中的属性，在 Web 应用程序的配置文件中以声明方式设置该属性 `applicationName` `<providers>` 。  
  
 如果没有为 `applicationName` Web 应用程序的配置文件中的属性指定值，则 <xref:System.Web.Hosting.HostingEnvironment.ApplicationVirtualPath%2A> 使用对应用程序发出的第一个请求的属性值。  
  
> [!CAUTION]
>  由于单个默认个性化设置提供程序实例用于对象提供的所有请求，因此 <xref:System.Web.HttpApplication> 可以同时执行多个请求并尝试设置 <xref:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider.ApplicationName%2A> 属性值。 <xref:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider.ApplicationName%2A>对于多个写入，属性不是线程安全的，并且更改 <xref:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider.ApplicationName%2A> 属性值可能会导致应用程序的多个用户产生意外行为。 除非需要，否则建议你避免使用代码来允许用户设置 <xref:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider.ApplicationName%2A> 属性。 可能需要设置属性的应用程序的一个示例 <xref:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider.ApplicationName%2A> 是管理多个应用程序的个性化数据的管理应用程序。 此类应用程序应为单用户应用程序，而不是 Web 应用程序。  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.Configuration.Provider.ProviderException">此属性设置为一个长度大于 256 个字符的字符串。</exception>
      </Docs>
    </Member>
    <Member MemberName="FindState">
      <MemberSignature Language="C#" Value="public override System.Web.UI.WebControls.WebParts.PersonalizationStateInfoCollection FindState (System.Web.UI.WebControls.WebParts.PersonalizationScope scope, System.Web.UI.WebControls.WebParts.PersonalizationStateQuery query, int pageIndex, int pageSize, out int totalRecords);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig virtual instance class System.Web.UI.WebControls.WebParts.PersonalizationStateInfoCollection FindState(valuetype System.Web.UI.WebControls.WebParts.PersonalizationScope scope, class System.Web.UI.WebControls.WebParts.PersonalizationStateQuery query, int32 pageIndex, int32 pageSize, [out] int32&amp; totalRecords) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider.FindState(System.Web.UI.WebControls.WebParts.PersonalizationScope,System.Web.UI.WebControls.WebParts.PersonalizationStateQuery,System.Int32,System.Int32,System.Int32@)" />
      <MemberSignature Language="VB.NET" Value="Public Overrides Function FindState (scope As PersonalizationScope, query As PersonalizationStateQuery, pageIndex As Integer, pageSize As Integer, ByRef totalRecords As Integer) As PersonalizationStateInfoCollection" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; override System::Web::UI::WebControls::WebParts::PersonalizationStateInfoCollection ^ FindState(System::Web::UI::WebControls::WebParts::PersonalizationScope scope, System::Web::UI::WebControls::WebParts::PersonalizationStateQuery ^ query, int pageIndex, int pageSize, [Runtime::InteropServices::Out] int % totalRecords);" />
      <MemberSignature Language="F#" Value="override this.FindState : System.Web.UI.WebControls.WebParts.PersonalizationScope * System.Web.UI.WebControls.WebParts.PersonalizationStateQuery * int * int * int -&gt; System.Web.UI.WebControls.WebParts.PersonalizationStateInfoCollection" Usage="sqlPersonalizationProvider.FindState (scope, query, pageIndex, pageSize, totalRecords)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Web.UI.WebControls.WebParts.PersonalizationStateInfoCollection</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="scope" Type="System.Web.UI.WebControls.WebParts.PersonalizationScope" />
        <Parameter Name="query" Type="System.Web.UI.WebControls.WebParts.PersonalizationStateQuery" />
        <Parameter Name="pageIndex" Type="System.Int32" />
        <Parameter Name="pageSize" Type="System.Int32" />
        <Parameter Name="totalRecords" Type="System.Int32" RefType="out" />
      </Parameters>
      <Docs>
        <param name="scope"><see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationScope" /> 用于指示要查询的个性化信息。 此值不能为 <see langword="null" />。</param>
        <param name="query">包含查询的 <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery" />。 此值可为 <see langword="null" />。</param>
        <param name="pageIndex">查询的起始位置。</param>
        <param name="pageSize">要返回的记录数。</param>
        <param name="totalRecords">可用记录的总数。</param>
        <summary>根据指定范围和参数返回一个包含零个或零个以上 <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationStateInfo" /> 派生对象的集合。</summary>
        <returns><see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationStateInfoCollection" />，包含零个或零个以上 <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationStateInfo" /> 派生对象。</returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 返回项的集合受和参数的约束 `pageSize` `pageIndex` ，其中 `pageSize` 控制要返回的记录数并 `pageIndex` 控制要返回的记录。 例如，值为 `pageIndex` 0 并且为 `pageSize` 25 时，将返回前25个匹配项，而 `pageIndex` 1 和25的值 `pageSize` 将返回出现26-50。 如果要提取所有可用记录，请将设置 `pageIndex` 为0，将设置为 `pageSize` <xref:System.Int32.MaxValue> 。  
  
 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateInfo>派生的对象以字母顺序返回 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateInfo.Path%2A> ，并按和排序 <xref:System.Web.UI.WebControls.WebParts.UserPersonalizationStateInfo.Username%2A> 。  
  
 此方法将查询通配符传递到基础数据存储区。 对通配符的支持当前依赖于每个访问接口如何处理星号 ( * ) 、百分比符号 (% ) 或下划线 (_) 。  
  
 通常，对于符合 SQL 标准的数据存储区，可以在部分路径上执行通配符搜索，通配符字符显示在属性中搜索字符串文本的开头、末尾或中间 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> 。 例如，若要查找以 "/approot" 开头的所有路径 \~ ，则该 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> 属性将设置为 " \~ /approot%"。  
  
 同样，在部分用户名上进行通配符搜索可能会在该属性的文本字符串中的任意位置显示通配符 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A> 。 例如，若要查找所有以 "John" 开头的用户名，该 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A> 参数将类似于 "john%"。  
  
 下面的查询约束适用：  
  
-   如果只 `scope` 提供了，并且 `query` 是 `null` 或的所有属性 `query` 返回 `null` 或默认值，则返回与指定参数匹配的所有记录 `scope` 。  
  
-   如果 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> 属性不为 `null` ，则还会根据与属性值匹配的路径来筛选返回的记录 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> 。  
  
-   如果 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A> 属性不为 `null` ，则还会根据与属性值匹配的用户名来筛选返回的记录 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A> 。  
  
-   如果该 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A> 属性不等于 <xref:System.DateTime.MaxValue> ，则返回的记录也将进行筛选，以仅返回与非活动用户关联的那些记录。 比较包含 <xref:System.Web.UI.WebControls.WebParts.UserPersonalizationStateInfo.LastActivityDate%2A> 属性小于或等于属性的记录 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A> 。  
  
 请注意，此方法不会验证查询参数的组合。 例如，代码可以请求一组与共享作用域中的特定用户名相关联的个性化设置状态记录。 由于用户名不与共享信息关联，因此返回的集合将为空。  
  
 有可能返回非空集合的参数组合包括：  
  
-   <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>作用域与的组合 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> 。  
  
-   <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>将范围与 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> 、和属性的任意或全部值组合在一起 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A> <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A> 。  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentException"><paramref name="pageIndex" /> 小于零。  
  
- 或 - 
 <paramref name="pageSize" /> 小于或等于零。  
  
-或- 
<paramref name="pageIndex" /> 与 <paramref name="pageSize" /> 的组合会得到一个大于 <see cref="F:System.Int32.MaxValue" /> 的值。  
  
-或- 
 <see cref="P:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch" /> 为非 <see langword="null" />，并且修整后为空字符串 ("")。  
  
-或- 
当值为非 <see langword="null" /> 时，<see cref="P:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch" /> 的长度大于 256 个字符。  
  
-或- 
 <see cref="P:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch" /> 为非 <see langword="null" />，并且修整后为空字符串。  
  
-或- 
当值为非 <see langword="null" /> 时，<see cref="P:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch" /> 的长度大于 256 个字符。</exception>
        <exception cref="T:System.ArgumentOutOfRangeException">指定的 <paramref name="scope" /> 不是 <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationScope" /> 枚举的有效值。</exception>
      </Docs>
    </Member>
    <Member MemberName="GetCountOfState">
      <MemberSignature Language="C#" Value="public override int GetCountOfState (System.Web.UI.WebControls.WebParts.PersonalizationScope scope, System.Web.UI.WebControls.WebParts.PersonalizationStateQuery query);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig virtual instance int32 GetCountOfState(valuetype System.Web.UI.WebControls.WebParts.PersonalizationScope scope, class System.Web.UI.WebControls.WebParts.PersonalizationStateQuery query) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider.GetCountOfState(System.Web.UI.WebControls.WebParts.PersonalizationScope,System.Web.UI.WebControls.WebParts.PersonalizationStateQuery)" />
      <MemberSignature Language="VB.NET" Value="Public Overrides Function GetCountOfState (scope As PersonalizationScope, query As PersonalizationStateQuery) As Integer" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; override int GetCountOfState(System::Web::UI::WebControls::WebParts::PersonalizationScope scope, System::Web::UI::WebControls::WebParts::PersonalizationStateQuery ^ query);" />
      <MemberSignature Language="F#" Value="override this.GetCountOfState : System.Web.UI.WebControls.WebParts.PersonalizationScope * System.Web.UI.WebControls.WebParts.PersonalizationStateQuery -&gt; int" Usage="sqlPersonalizationProvider.GetCountOfState (scope, query)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Int32</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="scope" Type="System.Web.UI.WebControls.WebParts.PersonalizationScope" />
        <Parameter Name="query" Type="System.Web.UI.WebControls.WebParts.PersonalizationStateQuery" />
      </Parameters>
      <Docs>
        <param name="scope"><see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationScope" /> 用于指示要查询的个性化信息。 此值不能为 <see langword="null" />。</param>
        <param name="query">包含查询的 <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery" />。 此值可为 <see langword="null" />。</param>
        <summary>返回针对指定 <paramref name="scope" /> 参数的基础数据存储区的行数。</summary>
        <returns>针对指定 <paramref name="scope" /> 参数的基础数据存储区的行数。</returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 此方法将查询通配符传递到基础数据存储区。 对通配符的支持当前依赖于每个访问接口如何处理星号 ( * ) 、百分比符号 (% ) 或下划线 (_) 。  
  
 通常，对于符合 SQL 标准的数据存储区，可以在部分路径上执行通配符搜索，通配符字符显示在属性中搜索字符串文本的开头、末尾或中间 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> 。 例如，若要查找以 "/approot" 开头的所有路径 \~ ，则该 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> 属性将设置为 " \~ /approot%"。  
  
 同样，在部分用户名上进行通配符搜索可能会在该属性的文本字符串中的任意位置显示通配符 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A> 。 例如，若要查找所有以 "John" 开头的用户名，该 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A> 参数将类似于 "john%"。  
  
 下面的查询约束适用：  
  
-   如果只 `scope` 提供了，并且 `query` 是 `null` 或的所有属性 `query` 返回 `null` 或默认值，则返回与指定参数匹配的所有记录 `scope` 。  
  
-   如果 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> 属性不为 `null` ，则还会根据与属性值匹配的路径来筛选返回的记录 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> 。  
  
-   如果不 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A> 为 `null` ，则还会根据与属性值匹配的用户名来筛选返回的记录 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A> 。  
  
-   如果该 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A> 属性不等于 <xref:System.DateTime.MaxValue> ，则返回的记录也将进行筛选，以仅返回与非活动用户关联的那些记录。 比较包含 <xref:System.Web.UI.WebControls.WebParts.UserPersonalizationStateInfo.LastActivityDate%2A> 属性小于或等于属性的记录 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A> 。  
  
 请注意，此方法不会验证查询参数的组合。 例如，代码可以在共享范围内请求与非活动用户关联的状态记录计数。 由于不存在非活动自定义的概念，因此返回的计数将为零。  
  
 有可能返回非空集合的参数组合包括：  
  
-   <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>作用域与的组合 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> 。  
  
-   <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>将范围与 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch%2A> 、和属性的任意或全部值组合在一起 <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch%2A> <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A> 。  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentException"><see cref="P:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch" /> 为非 <see langword="null" />，并且修整后为空字符串 ("")。  
  
-或- 
当值为非 <see langword="null" /> 时，<see cref="P:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.PathToMatch" /> 的长度大于 256 个字符。  
  
-或- 
 <see cref="P:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch" /> 为非 <see langword="null" />，并且修整后为空字符串。  
  
-或- 
当值为非 <see langword="null" /> 时，<see cref="P:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UsernameToMatch" /> 的长度大于 256 个字符。</exception>
        <exception cref="T:System.ArgumentOutOfRangeException">指定的 <paramref name="scope" /> 不是 <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationScope" /> 枚举的有效值。</exception>
      </Docs>
    </Member>
    <Member MemberName="Initialize">
      <MemberSignature Language="C#" Value="public override void Initialize (string name, System.Collections.Specialized.NameValueCollection configSettings);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig virtual instance void Initialize(string name, class System.Collections.Specialized.NameValueCollection configSettings) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider.Initialize(System.String,System.Collections.Specialized.NameValueCollection)" />
      <MemberSignature Language="VB.NET" Value="Public Overrides Sub Initialize (name As String, configSettings As NameValueCollection)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; override void Initialize(System::String ^ name, System::Collections::Specialized::NameValueCollection ^ configSettings);" />
      <MemberSignature Language="F#" Value="override this.Initialize : string * System.Collections.Specialized.NameValueCollection -&gt; unit" Usage="sqlPersonalizationProvider.Initialize (name, configSettings)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="name" Type="System.String" />
        <Parameter Name="configSettings" Type="System.Collections.Specialized.NameValueCollection" />
      </Parameters>
      <Docs>
        <param name="name">应用程序在配置文件中显示的名称。</param>
        <param name="configSettings">应用程序的配置设置。</param>
        <summary>实现 Microsoft SQL Server 个性化设置提供程序所需的初始化过程。 此方法不能直接在代码中使用。</summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 此方法提供了用于将个性化设置用于 SQL 数据库的初始化过程，但不应在代码中直接使用。  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.Configuration.Provider.ProviderException">没有为该提供程序配置连接字符串。  
  
-或- 
无法找到提供程序的连接字符串。  
  
-或- 
除配置设置中描述的特性外，提供程序的 <see langword="&lt;add&gt;" /> 元素还有其他特性。  
  
-或- 
应用程序名的长度大于 256 个字符。  
  
-或- 
承载应用程序的应用程序域运行在低于 <see cref="F:System.Web.AspNetHostingPermissionLevel.Medium" /> 的信任级别上。</exception>
        <exception cref="T:System.ArgumentNullException"><paramref name="configSettings" /> 为 <see langword="null" />。</exception>
      </Docs>
    </Member>
    <Member MemberName="LoadPersonalizationBlobs">
      <MemberSignature Language="C#" Value="protected override void LoadPersonalizationBlobs (System.Web.UI.WebControls.WebParts.WebPartManager webPartManager, string path, string userName, ref byte[] sharedDataBlob, ref byte[] userDataBlob);" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig virtual instance void LoadPersonalizationBlobs(class System.Web.UI.WebControls.WebParts.WebPartManager webPartManager, string path, string userName, unsigned int8[]&amp; sharedDataBlob, unsigned int8[]&amp; userDataBlob) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider.LoadPersonalizationBlobs(System.Web.UI.WebControls.WebParts.WebPartManager,System.String,System.String,System.Byte[]@,System.Byte[]@)" />
      <MemberSignature Language="VB.NET" Value="Protected Overrides Sub LoadPersonalizationBlobs (webPartManager As WebPartManager, path As String, userName As String, ByRef sharedDataBlob As Byte(), ByRef userDataBlob As Byte())" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; override void LoadPersonalizationBlobs(System::Web::UI::WebControls::WebParts::WebPartManager ^ webPartManager, System::String ^ path, System::String ^ userName, cli::array &lt;System::Byte&gt; ^ % sharedDataBlob, cli::array &lt;System::Byte&gt; ^ % userDataBlob);" />
      <MemberSignature Language="F#" Value="override this.LoadPersonalizationBlobs : System.Web.UI.WebControls.WebParts.WebPartManager * string * string * Byte[] * Byte[] -&gt; unit" Usage="sqlPersonalizationProvider.LoadPersonalizationBlobs (webPartManager, path, userName, sharedDataBlob, userDataBlob)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="webPartManager" Type="System.Web.UI.WebControls.WebParts.WebPartManager" />
        <Parameter Name="path" Type="System.String" />
        <Parameter Name="userName" Type="System.String" />
        <Parameter Name="sharedDataBlob" Type="System.Byte[]" RefType="ref" />
        <Parameter Name="userDataBlob" Type="System.Byte[]" RefType="ref" />
      </Parameters>
      <Docs>
        <param name="webPartManager">管理个性化设置数据的 <see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" />。</param>
        <param name="path"><see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared" /> 范围中要用作检索关键字的个性化设置信息的路径。</param>
        <param name="userName"><see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.User" /> 范围中要用作检索关键字的个性化设置信息的用户名。</param>
        <param name="sharedDataBlob">为 <see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared" /> 范围返回的数据。</param>
        <param name="userDataBlob">为 <see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.User" /> 范围返回的数据。</param>
        <summary>根据指定参数从基础数据存储区加载个性化设置数据。</summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 此方法使用 `webPartManager` 、 `path` 和 `username` 参数作为检索键。 返回的数据包含：  
  
-   <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>参数中返回的数据 `sharedDataBlob` 。  
  
-   根据键值，将在 <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> 参数中返回数据 `userDataBlob` 。 参数的非 `null` 值 `userName` 指示 <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> 也检索数据。  
  
 <xref:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider> <xref:System.Web.UI.WebControls.WebParts.UserPersonalizationStateInfo.LastActivityDate%2A> `aspnet_Users` 每次从页面请求上下文中的数据库加载特定于用户的个性化设置数据时，对象都会自动更新表中的列。 此行为允许其他 ASP.NET 功能 <xref:System.Web.UI.WebControls.WebParts.UserPersonalizationStateInfo.LastActivityDate%2A> 在管理陈旧数据记录时使用该属性，并确定站点上最近的用户活动。  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="ResetPersonalizationBlob">
      <MemberSignature Language="C#" Value="protected override void ResetPersonalizationBlob (System.Web.UI.WebControls.WebParts.WebPartManager webPartManager, string path, string userName);" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig virtual instance void ResetPersonalizationBlob(class System.Web.UI.WebControls.WebParts.WebPartManager webPartManager, string path, string userName) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider.ResetPersonalizationBlob(System.Web.UI.WebControls.WebParts.WebPartManager,System.String,System.String)" />
      <MemberSignature Language="VB.NET" Value="Protected Overrides Sub ResetPersonalizationBlob (webPartManager As WebPartManager, path As String, userName As String)" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; override void ResetPersonalizationBlob(System::Web::UI::WebControls::WebParts::WebPartManager ^ webPartManager, System::String ^ path, System::String ^ userName);" />
      <MemberSignature Language="F#" Value="override this.ResetPersonalizationBlob : System.Web.UI.WebControls.WebParts.WebPartManager * string * string -&gt; unit" Usage="sqlPersonalizationProvider.ResetPersonalizationBlob (webPartManager, path, userName)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="webPartManager" Type="System.Web.UI.WebControls.WebParts.WebPartManager" />
        <Parameter Name="path" Type="System.String" />
        <Parameter Name="userName" Type="System.String" />
      </Parameters>
      <Docs>
        <param name="webPartManager">管理个性化设置数据的 <see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" />。</param>
        <param name="path"><see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared" /> 范围中要用作检索关键字的个性化设置信息的路径。</param>
        <param name="userName"><see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.User" /> 范围中要用作检索关键字的个性化设置信息的用户名。</param>
        <summary>从基础数据存储区中删除个性化设置数据。</summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization>当网站用户选择重置页面上的 Web 部件数据时，使用此方法从数据库中删除个性化设置数据。 如果 `username` 为非 `null` ，则 <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> 删除带有作用域数据的数据; 否则，将删除具有该 <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> 作用域的数据。  
  
 <xref:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider> <xref:System.Web.UI.WebControls.WebParts.UserPersonalizationStateInfo.LastActivityDate%2A> `aspnet_Users` 每次从页面请求上下文中的数据库中删除用户特定的个性化数据时，对象都会自动更新表中的列。 此行为允许其他 ASP.NET 功能 <xref:System.Web.UI.WebControls.WebParts.UserPersonalizationStateInfo.LastActivityDate%2A> 在管理陈旧数据记录时使用该值，并确定站点上最近的用户活动。  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="ResetState">
      <MemberSignature Language="C#" Value="public override int ResetState (System.Web.UI.WebControls.WebParts.PersonalizationScope scope, string[] paths, string[] usernames);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig virtual instance int32 ResetState(valuetype System.Web.UI.WebControls.WebParts.PersonalizationScope scope, string[] paths, string[] usernames) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider.ResetState(System.Web.UI.WebControls.WebParts.PersonalizationScope,System.String[],System.String[])" />
      <MemberSignature Language="VB.NET" Value="Public Overrides Function ResetState (scope As PersonalizationScope, paths As String(), usernames As String()) As Integer" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; override int ResetState(System::Web::UI::WebControls::WebParts::PersonalizationScope scope, cli::array &lt;System::String ^&gt; ^ paths, cli::array &lt;System::String ^&gt; ^ usernames);" />
      <MemberSignature Language="F#" Value="override this.ResetState : System.Web.UI.WebControls.WebParts.PersonalizationScope * string[] * string[] -&gt; int" Usage="sqlPersonalizationProvider.ResetState (scope, paths, usernames)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Int32</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="scope" Type="System.Web.UI.WebControls.WebParts.PersonalizationScope" />
        <Parameter Name="paths" Type="System.String[]" />
        <Parameter Name="usernames" Type="System.String[]" />
      </Parameters>
      <Docs>
        <param name="scope"><see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationScope" /> 用于指示要查询的个性化信息。 此值不能为 <see langword="null" />。</param>
        <param name="paths"><see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared" /> 范围中待删除的个性化设置信息的路径。</param>
        <param name="usernames"><see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.User" /> 范围中待删除的个性化设置信息的用户名。</param>
        <summary>根据指定参数从基础数据存储区中删除个性化设置状态信息。</summary>
        <returns>删除的行数。</returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 此方法不支持通配符。  
  
 仅允许以下参数组合：  
  
-   `scope`设置参数，并将所有其他参数设置为 `null` 。 此组合将删除与所指示的个性化设置范围关联的所有 Web 部件的个性化设置数据 `scope` 。  
  
-   `scope`设置了参数，且 `paths` 参数至少包含一个值。 此组合会删除指定路径中的所有 Web 部件的个性化设置数据，这些数据是由指示的个性化设置范围中的路径 `scope` 。  
  
-   `scope`参数设置为 <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> ， `paths` 参数设置为，只包含一个路径，并且 `usernames` 参数至少包含一个值。 此组合将删除与中包含的用户或用户关联的给定路径的所有用户个性化 Web 部件数据 `usernames` 。  
  
-   `scope`参数设置为 <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> ， `paths` 参数为 `null` ，并且 `usernames` 参数至少包含一个值。 此组合将删除与中包含的用户或用户关联的所有路径中每个用户的个性化 Web 部件数据 `usernames` 。  
  
 参数值的任何其他组合均无效，并将引发 <xref:System.ArgumentException> 异常。 例如，不允许使用以下两种组合：  
  
-   `usernames`当 `scope` 参数设置为时，不能提供参数 <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> 。  
  
-   参数不 `paths` 能包含多个项 `usernames` `null` 。  
  
 `paths` `usernames` 各自数组中包含的和参数必须满足下列验证规则。 如果任何参数数组成员的任何验证规则都失败，则 <xref:System.ArgumentException> 会引发异常。 验证规则包括：  
  
-   `null`不允许使用值。  
  
-   在截断字符串后，不允许空字符串 ( "" ) 。  
  
-   参数中包含的用户名不 `usernames` 能包含逗号。  
  
-   参数中任何路径的长度 `paths` 不能超过256个字符。  
  
-   参数中的任何用户名的长度 `usernames` 不能超过256个字符。  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentException"><paramref name="paths" /> 或 <paramref name="usernames" /> 参数为空数组。  
  
-或- 
包含在各自数组中的 <paramref name="paths" /> 和 <paramref name="usernames" /> 参数不满足有效性规则。</exception>
        <exception cref="T:System.ArgumentOutOfRangeException">指定的 <paramref name="scope" /> 不是 <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationScope" /> 枚举的成员。</exception>
      </Docs>
    </Member>
    <Member MemberName="ResetUserState">
      <MemberSignature Language="C#" Value="public override int ResetUserState (string path, DateTime userInactiveSinceDate);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig virtual instance int32 ResetUserState(string path, valuetype System.DateTime userInactiveSinceDate) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider.ResetUserState(System.String,System.DateTime)" />
      <MemberSignature Language="VB.NET" Value="Public Overrides Function ResetUserState (path As String, userInactiveSinceDate As DateTime) As Integer" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; override int ResetUserState(System::String ^ path, DateTime userInactiveSinceDate);" />
      <MemberSignature Language="F#" Value="override this.ResetUserState : string * DateTime -&gt; int" Usage="sqlPersonalizationProvider.ResetUserState (path, userInactiveSinceDate)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Int32</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="path" Type="System.String" />
        <Parameter Name="userInactiveSinceDate" Type="System.DateTime" />
      </Parameters>
      <Docs>
        <param name="path">要删除的个性化设置数据的路径。 此值可以为 <see langword="null" />，但不能为空字符串 ("")。</param>
        <param name="userInactiveSinceDate">指示最后一次活动的日期。</param>
        <summary>根据指定参数从基础数据存储区删除用户个性化设置数据。</summary>
        <returns>从基础数据存储区中删除的行数。</returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 此方法的参数具有以下限制：  
  
-   `path`参数不能包含通配符。  
  
-   如果 `path` 参数不为 `null` ，则仅删除与关联的每用户个性化设置记录 `path` 。  
  
-   只有自参数指定的日期后，将删除与被视为非活动状态的用户关联的每个用户个性化记录 `userInactiveSinceDate` 。 确切的比较是删除 <xref:System.Web.UI.WebControls.WebParts.UserPersonalizationStateInfo.LastActivityDate%2A> 属性小于或等于参数的记录 `userInactiveSinceDate` 。  
  
-   如果同时提供了这两个参数，则将删除匹配这两个约束的记录。  
  
-   `path`参数可以是 `null` 。  
  
-   `path`修整后，该参数不能为空字符串。  
  
-   <xref:System.Web.UI.WebControls.WebParts.PersonalizationStateQuery.UserInactiveSinceDate%2A> 属性不能为 `null`。  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentException"><paramref name="path" /> 是一个空字符串。  
  
-或- 
该路径的长度大于 256 个字符。</exception>
      </Docs>
    </Member>
    <Member MemberName="SavePersonalizationBlob">
      <MemberSignature Language="C#" Value="protected override void SavePersonalizationBlob (System.Web.UI.WebControls.WebParts.WebPartManager webPartManager, string path, string userName, byte[] dataBlob);" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig virtual instance void SavePersonalizationBlob(class System.Web.UI.WebControls.WebParts.WebPartManager webPartManager, string path, string userName, unsigned int8[] dataBlob) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider.SavePersonalizationBlob(System.Web.UI.WebControls.WebParts.WebPartManager,System.String,System.String,System.Byte[])" />
      <MemberSignature Language="VB.NET" Value="Protected Overrides Sub SavePersonalizationBlob (webPartManager As WebPartManager, path As String, userName As String, dataBlob As Byte())" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; override void SavePersonalizationBlob(System::Web::UI::WebControls::WebParts::WebPartManager ^ webPartManager, System::String ^ path, System::String ^ userName, cli::array &lt;System::Byte&gt; ^ dataBlob);" />
      <MemberSignature Language="F#" Value="override this.SavePersonalizationBlob : System.Web.UI.WebControls.WebParts.WebPartManager * string * string * byte[] -&gt; unit" Usage="sqlPersonalizationProvider.SavePersonalizationBlob (webPartManager, path, userName, dataBlob)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="webPartManager" Type="System.Web.UI.WebControls.WebParts.WebPartManager" />
        <Parameter Name="path" Type="System.String" />
        <Parameter Name="userName" Type="System.String" />
        <Parameter Name="dataBlob" Type="System.Byte[]" />
      </Parameters>
      <Docs>
        <param name="webPartManager">管理个性化设置数据的 <see cref="T:System.Web.UI.WebControls.WebParts.WebPartManager" />。</param>
        <param name="path">指示要保存的个性化设置信息的 <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationScope" />。 此值不能为 <see langword="null" />。</param>
        <param name="userName"><see cref="F:System.Web.UI.WebControls.WebParts.PersonalizationScope.User" /> 范围中要用作关键字的个性化设置信息的用户名。</param>
        <param name="dataBlob">要保存的数据的字节数组。</param>
        <summary>将原始个性化设置数据保存到基础 Microsoft SQL Server 数据库中。</summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 如果提供了非 `null` 用户名，则 `dataBlob` 参数包含作用域的个性化数据 <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> ; 否则， `dataBlob` 将假定其包含 <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> 作用域的数据。  
  
 <xref:System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider> <xref:System.Web.UI.WebControls.WebParts.UserPersonalizationStateInfo.LastActivityDate%2A> `aspnet_Users` 每次将特定于用户的个性化设置数据保存到页面请求上下文中的数据库中时，对象都会自动更新表中的列。 此行为允许其他 ASP.NET 功能 <xref:System.Web.UI.WebControls.WebParts.UserPersonalizationStateInfo.LastActivityDate%2A> 在管理陈旧数据记录时使用该属性，并确定站点上最近的用户活动。  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
  </Members>
</Type>
