<Type Name="IPersonalizable" FullName="System.Web.UI.WebControls.WebParts.IPersonalizable">
  <Metadata><Meta Name="ms.openlocfilehash" Value="9762519573962218a7aa1fc2c8df4ccce38aea70" /><Meta Name="ms.sourcegitcommit" Value="397961a0164281b579f68064c3bb66c071f374d9" /><Meta Name="ms.translationtype" Value="MT" /><Meta Name="ms.contentlocale" Value="zh-CN" /><Meta Name="ms.lasthandoff" Value="07/14/2020" /><Meta Name="ms.locfileid" Value="69395359" /></Metadata><TypeSignature Language="C#" Value="public interface IPersonalizable" />
  <TypeSignature Language="ILAsm" Value=".class public interface auto ansi abstract IPersonalizable" />
  <TypeSignature Language="DocId" Value="T:System.Web.UI.WebControls.WebParts.IPersonalizable" />
  <TypeSignature Language="VB.NET" Value="Public Interface IPersonalizable" />
  <TypeSignature Language="C++ CLI" Value="public interface class IPersonalizable" />
  <TypeSignature Language="F#" Value="type IPersonalizable = interface" />
  <AssemblyInfo>
    <AssemblyName>System.Web</AssemblyName>
    <AssemblyVersion>2.0.0.0</AssemblyVersion>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <Interfaces />
  <Docs>
    <summary><span data-ttu-id="abb1f-101">定义用于应用程序和个性化状态的提取的附加管理功能。</span><span class="sxs-lookup"><span data-stu-id="abb1f-101">Defines additional management capabilities for the application and extraction of personalization state.</span></span></summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="abb1f-102">除了对 `Personalizable` 控件属性使用特性之外，还可以 <xref:System.Web.UI.WebControls.WebParts.IPersonalizable> 为应用程序实现其他管理功能并提取个性化设置状态。</span><span class="sxs-lookup"><span data-stu-id="abb1f-102">In addition to using the `Personalizable` attribute on control properties, a control can also implement <xref:System.Web.UI.WebControls.WebParts.IPersonalizable> for additional management capabilities for the application and extraction of personalization state.</span></span> <span data-ttu-id="abb1f-103">例如，需要管理私有状态信息的控件应实现此接口。</span><span class="sxs-lookup"><span data-stu-id="abb1f-103">For example, controls that need to manage private state information should implement this interface.</span></span> <span data-ttu-id="abb1f-104">通过复杂的机制访问个性化数据的控件（如自定义缓存解决方案、持久化到大型机的数据或 XML Web services）也应该实现此接口。</span><span class="sxs-lookup"><span data-stu-id="abb1f-104">Controls that access personalized data through complex mechanisms, such as custom cache solutions, data persistence to mainframes, or XML Web services, should also implement this interface.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="abb1f-105">不应根据 App_Code 目录中定义的类添加类型，而是依赖于默认的二进制序列化机制。</span><span class="sxs-lookup"><span data-stu-id="abb1f-105">You should not add types based on classes defined in the App_Code directory and then depend on the default binary serialization mechanism.</span></span> <span data-ttu-id="abb1f-106">基于 App_Code 的项目由于其程序集名称可在随机时间点发生更改，因此不能一直以二进制可序列化。</span><span class="sxs-lookup"><span data-stu-id="abb1f-106">App_Code-based artifacts are not consistently binary-serializable due to the fact that they can have their assembly names changed at random points in time.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="abb1f-107">下面的代码示例演示如何使用 <xref:System.Web.UI.WebControls.WebParts.IPersonalizable> 接口。</span><span class="sxs-lookup"><span data-stu-id="abb1f-107">The following code example demonstrates how to use the <xref:System.Web.UI.WebControls.WebParts.IPersonalizable> interface.</span></span> <span data-ttu-id="abb1f-108">该示例包含一个 .aspx 页面，该页面引用名为的 Web 部件控件 `UrlListWebPart` 。</span><span class="sxs-lookup"><span data-stu-id="abb1f-108">The example consists of an .aspx page that references a Web Part control named `UrlListWebPart`.</span></span> <span data-ttu-id="abb1f-109">下面的代码是该示例的 .aspx 文件。</span><span class="sxs-lookup"><span data-stu-id="abb1f-109">The following code is the .aspx file for the example.</span></span>  
  
 [!code-aspx-csharp[WebParts_IPersonalizable_Overview#1](~/samples/snippets/csharp/VS_Snippets_WebNet/WebParts_IPersonalizable_Overview/CS/IPersonalizableCS.aspx#1)]
 [!code-aspx-vb[WebParts_IPersonalizable_Overview#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/WebParts_IPersonalizable_Overview/VB/IPersonalizableVB.aspx#1)]  
  
 <span data-ttu-id="abb1f-110">下面的代码是自定义控件的源 <xref:System.Web.UI.WebControls.WebParts.WebPart> 。</span><span class="sxs-lookup"><span data-stu-id="abb1f-110">The following code is the source for the custom <xref:System.Web.UI.WebControls.WebParts.WebPart> control.</span></span> <span data-ttu-id="abb1f-111">应将此文件放置在 App_Code 目录中。</span><span class="sxs-lookup"><span data-stu-id="abb1f-111">This file should be placed in the App_Code directory.</span></span>  
  
 [!code-csharp[WebParts_IPersonalizable_Overview#2](~/samples/snippets/csharp/VS_Snippets_WebNet/WebParts_IPersonalizable_Overview/CS/urllistwebpart.cs#2)]
 [!code-vb[WebParts_IPersonalizable_Overview#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/WebParts_IPersonalizable_Overview/VB/urllistwebpart.vb#2)]  
  
 <span data-ttu-id="abb1f-112">在浏览器中加载页面。</span><span class="sxs-lookup"><span data-stu-id="abb1f-112">Load the page in a browser.</span></span> <span data-ttu-id="abb1f-113">键入一个名称来表示 URL，然后添加以开头的实际 URL，然后 `http://` 单击 "**添加**" 按钮添加该 url。</span><span class="sxs-lookup"><span data-stu-id="abb1f-113">Type in a name to represent a URL, then add an actual URL beginning with `http://`, and click the **Add** button to add the URL.</span></span>  
  
 ]]></format>
    </remarks>
  </Docs>
  <Members>
    <Member MemberName="IsDirty">
      <MemberSignature Language="C#" Value="public bool IsDirty { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance bool IsDirty" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.WebParts.IPersonalizable.IsDirty" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property IsDirty As Boolean" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property bool IsDirty { bool get(); };" />
      <MemberSignature Language="F#" Value="member this.IsDirty : bool" Usage="System.Web.UI.WebControls.WebParts.IPersonalizable.IsDirty" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="abb1f-114">获取一个值，该值指示控件管理的自定义数据是否已经更改。</span><span class="sxs-lookup"><span data-stu-id="abb1f-114">Gets a value that indicates whether the custom data that a control manages has changed.</span></span></summary>
        <value><span data-ttu-id="abb1f-115">如果用 <see cref="T:System.Web.UI.WebControls.WebParts.IPersonalizable" /> 接口管理的自定义数据已经更改，则为 <see langword="true" />；否则为 <see langword="false" />。</span><span class="sxs-lookup"><span data-stu-id="abb1f-115"><see langword="true" /> if the custom data managed with the <see cref="T:System.Web.UI.WebControls.WebParts.IPersonalizable" /> interface has changed; otherwise, <see langword="false" />.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="abb1f-116">如果控件管理的数据已更改，则会将该控件视为 "脏"。</span><span class="sxs-lookup"><span data-stu-id="abb1f-116">When data managed by a control has changed, the control is considered "dirty."</span></span> <span data-ttu-id="abb1f-117">`true`如果控件通过接口所管理的自定义数据已更改，则该控件应返回 <xref:System.Web.UI.WebControls.WebParts.IPersonalizable> 。</span><span class="sxs-lookup"><span data-stu-id="abb1f-117">A control should return `true` if the custom data that it manages through the <xref:System.Web.UI.WebControls.WebParts.IPersonalizable> interface has changed.</span></span> <span data-ttu-id="abb1f-118">如果控件 `true` 从此属性返回，则在 <xref:System.Web.UI.WebControls.WebParts.IPersonalizable.Save%2A> 属性值提取过程中调用控件的接口方法实现。</span><span class="sxs-lookup"><span data-stu-id="abb1f-118">If a control returns `true` from this property, the control's <xref:System.Web.UI.WebControls.WebParts.IPersonalizable.Save%2A> interface method implementation is called during property value extraction.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="abb1f-119">在处理 POST 请求的后一阶段，个性化设置基础结构会自动检查此属性。</span><span class="sxs-lookup"><span data-stu-id="abb1f-119">This property is checked automatically by the personalization infrastructure during the latter phases of processing a POST request.</span></span> <span data-ttu-id="abb1f-120">但对于 GET 请求， <xref:System.Web.UI.WebControls.WebParts.IPersonalizable.IsDirty%2A> 不会检查从属性返回的值。</span><span class="sxs-lookup"><span data-stu-id="abb1f-120">However, for GET requests, the value returned from the <xref:System.Web.UI.WebControls.WebParts.IPersonalizable.IsDirty%2A> property is not checked.</span></span> <span data-ttu-id="abb1f-121">某些其他事件必须导致对任何控件状态将控件视为 "已更新"，而不只是 <xref:System.Web.UI.WebControls.WebParts.IPersonalizable> 要保存的数据。</span><span class="sxs-lookup"><span data-stu-id="abb1f-121">Some other event has to have caused the control to be considered "dirty" for any control state--not just data managed by <xref:System.Web.UI.WebControls.WebParts.IPersonalizable>--to be saved.</span></span> <span data-ttu-id="abb1f-122">如果控件在获取请求期间可以将自身标记为 "已更新"，或者在某些非常特定的边界条件下的个性化设置基础结构在 GET 请求期间认为控件 "更新"，则 <xref:System.Web.UI.WebControls.WebParts.IPersonalizable.Save%2A> 将始终调用。</span><span class="sxs-lookup"><span data-stu-id="abb1f-122">If a control can mark itself as "dirty" during a GET request, or if the personalization infrastructure under some very specific boundary conditions considers a control "dirty" during a GET request, then <xref:System.Web.UI.WebControls.WebParts.IPersonalizable.Save%2A> will always be called.</span></span>  
  
 <span data-ttu-id="abb1f-123">控件可以引用其关联的 <xref:System.Web.UI.WebControls.WebParts.WebPartManager> 控件并检查 <xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization.Scope%2A> 属性以确定当前范围。</span><span class="sxs-lookup"><span data-stu-id="abb1f-123">A control can reference its associated <xref:System.Web.UI.WebControls.WebParts.WebPartManager> control and check the <xref:System.Web.UI.WebControls.WebParts.WebPartPersonalization.Scope%2A> property to determine the current scope.</span></span> <span data-ttu-id="abb1f-124">控件的自定义数据的 "已更新" 状态应适合当前范围。</span><span class="sxs-lookup"><span data-stu-id="abb1f-124">The "dirty" state of a control's custom data should be appropriate for the current scope.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="abb1f-125">下面的代码示例演示属性的用法 <xref:System.Web.UI.WebControls.WebParts.IPersonalizable.IsDirty%2A> 。</span><span class="sxs-lookup"><span data-stu-id="abb1f-125">The following code example demonstrates use of the <xref:System.Web.UI.WebControls.WebParts.IPersonalizable.IsDirty%2A> property.</span></span> <span data-ttu-id="abb1f-126">该示例的第一部分是承载控件的网页 <xref:System.Web.UI.WebControls.WebParts.WebPart> 。</span><span class="sxs-lookup"><span data-stu-id="abb1f-126">The first part of the example is the Web page that hosts a <xref:System.Web.UI.WebControls.WebParts.WebPart> control.</span></span>  
  
 [!code-aspx-csharp[WebParts_IPersonalizable_Overview#1](~/samples/snippets/csharp/VS_Snippets_WebNet/WebParts_IPersonalizable_Overview/CS/IPersonalizableCS.aspx#1)]
 [!code-aspx-vb[WebParts_IPersonalizable_Overview#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/WebParts_IPersonalizable_Overview/VB/IPersonalizableVB.aspx#1)]  
  
 <span data-ttu-id="abb1f-127">该示例的第二部分是名为的自定义 <xref:System.Web.UI.WebControls.WebParts.WebPart> 控件的代码 `UrlListWebPart` 。</span><span class="sxs-lookup"><span data-stu-id="abb1f-127">The second part of the example is the code for the custom <xref:System.Web.UI.WebControls.WebParts.WebPart> control called `UrlListWebPart`.</span></span> <span data-ttu-id="abb1f-128">应将此文件放置在 App_Code 目录中以运行此示例。</span><span class="sxs-lookup"><span data-stu-id="abb1f-128">This file should be placed in the App_Code directory to run the example.</span></span> <span data-ttu-id="abb1f-129">请注意，源代码实现了 <xref:System.Web.UI.WebControls.WebParts.IPersonalizable.IsDirty%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="abb1f-129">Note that the source code implements the <xref:System.Web.UI.WebControls.WebParts.IPersonalizable.IsDirty%2A> property.</span></span>  
  
 [!code-csharp[WebParts_IPersonalizable_Overview#2](~/samples/snippets/csharp/VS_Snippets_WebNet/WebParts_IPersonalizable_Overview/CS/urllistwebpart.cs#2)]
 [!code-vb[WebParts_IPersonalizable_Overview#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/WebParts_IPersonalizable_Overview/VB/urllistwebpart.vb#2)]  
  
 <span data-ttu-id="abb1f-130">在浏览器中加载页面。</span><span class="sxs-lookup"><span data-stu-id="abb1f-130">Load the page in a browser.</span></span> <span data-ttu-id="abb1f-131">键入一个名称来表示 URL，然后添加以开头的实际 URL，然后 `http://` 单击 "**添加**" 按钮添加该 url。</span><span class="sxs-lookup"><span data-stu-id="abb1f-131">Type in a name to represent a URL, then add an actual URL beginning with `http://`, and click the **Add** button to add the URL.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="Load">
      <MemberSignature Language="C#" Value="public void Load (System.Web.UI.WebControls.WebParts.PersonalizationDictionary state);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void Load(class System.Web.UI.WebControls.WebParts.PersonalizationDictionary state) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.IPersonalizable.Load(System.Web.UI.WebControls.WebParts.PersonalizationDictionary)" />
      <MemberSignature Language="VB.NET" Value="Public Sub Load (state As PersonalizationDictionary)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; void Load(System::Web::UI::WebControls::WebParts::PersonalizationDictionary ^ state);" />
      <MemberSignature Language="F#" Value="abstract member Load : System.Web.UI.WebControls.WebParts.PersonalizationDictionary -&gt; unit" Usage="iPersonalizable.Load state" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="state" Type="System.Web.UI.WebControls.WebParts.PersonalizationDictionary" />
      </Parameters>
      <Docs>
        <param name="state"><span data-ttu-id="abb1f-132">包含从基础数据存储区中加载的自定义范围确定数据的 <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationDictionary" />。</span><span class="sxs-lookup"><span data-stu-id="abb1f-132">A <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationDictionary" /> that contains custom scoped data that was loaded from the underlying data store.</span></span></param>
        <summary><span data-ttu-id="abb1f-133">将自定义数据加载到控件中。</span><span class="sxs-lookup"><span data-stu-id="abb1f-133">Loads custom data into a control.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="abb1f-134">此方法在控件上调用，以允许它将自定义数据加载到其自身中。</span><span class="sxs-lookup"><span data-stu-id="abb1f-134">This method is called on a control to allow it to load custom data into itself.</span></span> <span data-ttu-id="abb1f-135">它还可以返回一个值，该值指示是否必须将控件的自定义状态写回到基础数据存储区，而不管页面上的任何其他个性化设置数据是否已更改。</span><span class="sxs-lookup"><span data-stu-id="abb1f-135">It can also return a value that indicates whether a control's custom state must be written back to the underlying data store, regardless of whether any other personalization data on the page has changed.</span></span> <span data-ttu-id="abb1f-136">控件可以设置自己的自定义属性，并基于个性化字典中包含的值来执行其他内部逻辑。</span><span class="sxs-lookup"><span data-stu-id="abb1f-136">A control can set its own custom properties and carry out additional internal logic based on the values contained in the personalization dictionary.</span></span> <span data-ttu-id="abb1f-137">将个性化设置数据应用于控件时，Web 部件控件集调用此方法。</span><span class="sxs-lookup"><span data-stu-id="abb1f-137">This method is called by the Web Parts control set while applying personalization data to a control.</span></span>  
  
 <span data-ttu-id="abb1f-138">还应注意 <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> 对象中包含的作用域和 <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> 作用域属性的合并行为 <xref:System.Web.UI.WebControls.WebParts.PersonalizationDictionary> 。</span><span class="sxs-lookup"><span data-stu-id="abb1f-138">You should also be aware of the merge behavior of <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>-scoped versus <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared>-scoped properties contained in the <xref:System.Web.UI.WebControls.WebParts.PersonalizationDictionary> object.</span></span> <span data-ttu-id="abb1f-139">`state`参数包含从基础数据存储区加载的自定义数据的合并表示形式。</span><span class="sxs-lookup"><span data-stu-id="abb1f-139">The `state` parameter contains a merged representation of custom data that was loaded from the underlying data store.</span></span> <span data-ttu-id="abb1f-140">在 " <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> 范围" 中，在页面本身处于范围内时，先前添加的所有值都将 <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> 可用。</span><span class="sxs-lookup"><span data-stu-id="abb1f-140">In <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> scope, all the values that were previously added when the page itself was in <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> scope would be available.</span></span> <span data-ttu-id="abb1f-141">在 <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> 作用域中，如果与 <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> 个性化设置范围关联的值具有在页处于范围中时添加的一个值 <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> ，并且当该页处于范围内时，此值为不同的值， <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> 则个性化设置基础结构仅在 <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> 参数内包括范围内的值（而不是 <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> 作用域值） `state` 。</span><span class="sxs-lookup"><span data-stu-id="abb1f-141">In <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> scope, if a value associated with <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> personalization scope had one value added when the page was in <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> scope, and a different value when the page was in <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> scope, then the personalization infrastructure would only include the <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>-scoped value (as opposed to the <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> scope value) within the `state` parameter.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="abb1f-142">下面的代码示例演示了 <xref:System.Web.UI.WebControls.WebParts.IPersonalizable.Load%2A> 自定义控件中方法的实现 <xref:System.Web.UI.WebControls.WebParts.WebPart> 。</span><span class="sxs-lookup"><span data-stu-id="abb1f-142">The following code example demonstrates an implementation of the <xref:System.Web.UI.WebControls.WebParts.IPersonalizable.Load%2A> method in a custom <xref:System.Web.UI.WebControls.WebParts.WebPart> control.</span></span> <span data-ttu-id="abb1f-143">有关运行此示例所需的完整代码，请参阅类概述中的 "示例" 部分 <xref:System.Web.UI.WebControls.WebParts.IPersonalizable> 。</span><span class="sxs-lookup"><span data-stu-id="abb1f-143">For the full code required to run this example, see the Example section in the <xref:System.Web.UI.WebControls.WebParts.IPersonalizable> class overview.</span></span>  
  
 [!code-csharp[WebParts_IPersonalizable_Overview#2](~/samples/snippets/csharp/VS_Snippets_WebNet/WebParts_IPersonalizable_Overview/CS/urllistwebpart.cs#2)]
 [!code-vb[WebParts_IPersonalizable_Overview#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/WebParts_IPersonalizable_Overview/VB/urllistwebpart.vb#2)]  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="Save">
      <MemberSignature Language="C#" Value="public void Save (System.Web.UI.WebControls.WebParts.PersonalizationDictionary state);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void Save(class System.Web.UI.WebControls.WebParts.PersonalizationDictionary state) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.WebParts.IPersonalizable.Save(System.Web.UI.WebControls.WebParts.PersonalizationDictionary)" />
      <MemberSignature Language="VB.NET" Value="Public Sub Save (state As PersonalizationDictionary)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; void Save(System::Web::UI::WebControls::WebParts::PersonalizationDictionary ^ state);" />
      <MemberSignature Language="F#" Value="abstract member Save : System.Web.UI.WebControls.WebParts.PersonalizationDictionary -&gt; unit" Usage="iPersonalizable.Save state" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="state" Type="System.Web.UI.WebControls.WebParts.PersonalizationDictionary" />
      </Parameters>
      <Docs>
        <param name="state"><span data-ttu-id="abb1f-144">包含从基础数据存储区中加载的自定义范围确定数据的 <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationDictionary" />。</span><span class="sxs-lookup"><span data-stu-id="abb1f-144">A <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationDictionary" /> that contains custom scoped data that was loaded from the underlying data store.</span></span></param>
        <summary><span data-ttu-id="abb1f-145">在控件的 <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationDictionary" /> 对象中保存自定义属性和内部状态信息。</span><span class="sxs-lookup"><span data-stu-id="abb1f-145">Saves custom properties and internal state information in the control's <see cref="T:System.Web.UI.WebControls.WebParts.PersonalizationDictionary" /> object.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="abb1f-146">服务器控件可以将其自己的自定义属性和内部状态信息存储 <xref:System.Web.UI.WebControls.WebParts.PersonalizationDictionary> 在参数中指定的中 `state` 。</span><span class="sxs-lookup"><span data-stu-id="abb1f-146">A server control can store its own custom properties and internal state information the <xref:System.Web.UI.WebControls.WebParts.PersonalizationDictionary> specified in the `state` parameter.</span></span> <span data-ttu-id="abb1f-147">此信息以一系列名称/值对的形式存储。</span><span class="sxs-lookup"><span data-stu-id="abb1f-147">The information is stored as a series of name/value pairs.</span></span> <span data-ttu-id="abb1f-148">控件负责使用名称/值对，在后续通过方法对控件进行调用时，它可以识别 <xref:System.Web.UI.WebControls.WebParts.IPersonalizable.Load%2A> 。</span><span class="sxs-lookup"><span data-stu-id="abb1f-148">It is the responsibility of the control to use name/value pairs that it can recognize during subsequent calls made to the control through the <xref:System.Web.UI.WebControls.WebParts.IPersonalizable.Load%2A> method.</span></span>  
  
 <span data-ttu-id="abb1f-149">控件可以引用其关联的 <xref:System.Web.UI.WebControls.WebParts.WebPartManager> 控件并检查 <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope> 对象，以确定当前范围。</span><span class="sxs-lookup"><span data-stu-id="abb1f-149">A control can reference its associated <xref:System.Web.UI.WebControls.WebParts.WebPartManager> control and check the <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope> object to determine the current scope.</span></span> <span data-ttu-id="abb1f-150">自定义状态信息应该适用于当前范围。</span><span class="sxs-lookup"><span data-stu-id="abb1f-150">Custom state information should be appropriate for the current scope.</span></span> <span data-ttu-id="abb1f-151">请注意 <xref:System.Web.UI.WebControls.WebParts.PersonalizationEntry> ，添加到对象的每个值都 <xref:System.Web.UI.WebControls.WebParts.PersonalizationDictionary> 应该与相应的作用域值相关联，因为个性化设置基础结构在 <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User> 将其传递给方法之前合并和作用域的自定义数据时依赖于这一点 <xref:System.Web.UI.WebControls.WebParts.IPersonalizable.Load%2A> 。</span><span class="sxs-lookup"><span data-stu-id="abb1f-151">Note that each <xref:System.Web.UI.WebControls.WebParts.PersonalizationEntry> value that is added to the <xref:System.Web.UI.WebControls.WebParts.PersonalizationDictionary> object should be associated with the appropriate scope value, because the personalization infrastructure depends on this when merging <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared> and <xref:System.Web.UI.WebControls.WebParts.PersonalizationScope.User>-scoped custom data prior to passing it to the <xref:System.Web.UI.WebControls.WebParts.IPersonalizable.Load%2A> method.</span></span>  
  
 <span data-ttu-id="abb1f-152">使用 Web 部件的标准 ASP.NET 实现时，控件必须确保位于状态字典中的对象可以由 ASP.NET 类进行序列化 <xref:System.Web.UI.ObjectStateFormatter> 。</span><span class="sxs-lookup"><span data-stu-id="abb1f-152">When using the standard ASP.NET implementation of Web Parts, controls must ensure that objects placed in the state dictionary can be serialized by the ASP.NET <xref:System.Web.UI.ObjectStateFormatter> class.</span></span> <span data-ttu-id="abb1f-153">在实践中，这意味着：</span><span class="sxs-lookup"><span data-stu-id="abb1f-153">In practice, this means the following:</span></span>  
  
-   <span data-ttu-id="abb1f-154">基元 .NET Framework 类型、字符串和面向集合的 .NET Framework 类型（如数组、数组列表、哈希表和混合字典）会自动序列化。</span><span class="sxs-lookup"><span data-stu-id="abb1f-154">Primitive .NET Framework types, strings, and collection-oriented .NET Framework types such as arrays, array lists, hash tables, and hybrid dictionaries, are automatically serializable.</span></span>  
  
-   <span data-ttu-id="abb1f-155">提供自己的类的自定义类型，这些 <xref:System.ComponentModel.TypeConverter> 类可以序列化和反序列化字符串。</span><span class="sxs-lookup"><span data-stu-id="abb1f-155">Custom types that supply their own <xref:System.ComponentModel.TypeConverter> classes capable of serializing to and deserializing from strings are considered serializable.</span></span>  
  
-   <span data-ttu-id="abb1f-156">可由类进行序列化的自定义类型被 <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> 视为可序列化。</span><span class="sxs-lookup"><span data-stu-id="abb1f-156">Custom types that can be serialized by the <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> class are considered serializable.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="abb1f-157">不应根据 App_Code 目录中定义的类添加类型，而是依赖于默认的二进制序列化机制。</span><span class="sxs-lookup"><span data-stu-id="abb1f-157">You should not add types based on classes defined in the App_Code directory and then depend on the default binary serialization mechanism.</span></span> <span data-ttu-id="abb1f-158">基于 App_Code 的项目由于其程序集名称可在随机时间点发生更改，因此不能一直以二进制可序列化。</span><span class="sxs-lookup"><span data-stu-id="abb1f-158">App_Code-based artifacts are not consistently binary-serializable due to the fact that they can have their assembly names changed at random points in time.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="abb1f-159">下面的代码示例演示如何 <xref:System.Web.UI.WebControls.WebParts.IPersonalizable.Save%2A> 在自定义控件中实现方法 <xref:System.Web.UI.WebControls.WebParts.WebPart> 。</span><span class="sxs-lookup"><span data-stu-id="abb1f-159">The following code example demonstrates implementing the <xref:System.Web.UI.WebControls.WebParts.IPersonalizable.Save%2A> method in a custom <xref:System.Web.UI.WebControls.WebParts.WebPart> control.</span></span> <span data-ttu-id="abb1f-160">有关运行此示例所需的完整代码，请参阅类概述中的 "示例" 部分 <xref:System.Web.UI.WebControls.WebParts.IPersonalizable> 。</span><span class="sxs-lookup"><span data-stu-id="abb1f-160">For the full code required to run this example, see the Example section in the <xref:System.Web.UI.WebControls.WebParts.IPersonalizable> class overview.</span></span>  
  
 [!code-csharp[WebParts_IPersonalizable_Overview#2](~/samples/snippets/csharp/VS_Snippets_WebNet/WebParts_IPersonalizable_Overview/CS/urllistwebpart.cs#2)]
 [!code-vb[WebParts_IPersonalizable_Overview#2](~/samples/snippets/visualbasic/VS_Snippets_WebNet/WebParts_IPersonalizable_Overview/VB/urllistwebpart.vb#2)]  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
  </Members>
</Type>
