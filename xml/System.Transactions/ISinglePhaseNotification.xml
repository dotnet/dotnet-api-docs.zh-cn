<Type Name="ISinglePhaseNotification" FullName="System.Transactions.ISinglePhaseNotification">
  <Metadata><Meta Name="ms.openlocfilehash" Value="84b657e12444c9e729da0d8e25ce3c9a531429ca" /><Meta Name="ms.sourcegitcommit" Value="c982ad9e10a242d90f1e631b5981570f9e5d9f34" /><Meta Name="ms.translationtype" Value="MT" /><Meta Name="ms.contentlocale" Value="zh-CN" /><Meta Name="ms.lasthandoff" Value="09/10/2020" /><Meta Name="ms.locfileid" Value="89783410" /></Metadata><TypeSignature Language="C#" Value="public interface ISinglePhaseNotification : System.Transactions.IEnlistmentNotification" />
  <TypeSignature Language="ILAsm" Value=".class public interface auto ansi abstract ISinglePhaseNotification implements class System.Transactions.IEnlistmentNotification" />
  <TypeSignature Language="DocId" Value="T:System.Transactions.ISinglePhaseNotification" />
  <TypeSignature Language="VB.NET" Value="Public Interface ISinglePhaseNotification&#xA;Implements IEnlistmentNotification" />
  <TypeSignature Language="C++ CLI" Value="public interface class ISinglePhaseNotification : System::Transactions::IEnlistmentNotification" />
  <TypeSignature Language="F#" Value="type ISinglePhaseNotification = interface&#xA;    interface IEnlistmentNotification" />
  <AssemblyInfo>
    <AssemblyName>System.Transactions</AssemblyName>
    <AssemblyVersion>2.0.0.0</AssemblyVersion>
    <AssemblyVersion>2.0.5.0</AssemblyVersion>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <AssemblyInfo>
    <AssemblyName>netstandard</AssemblyName>
    <AssemblyVersion>2.0.0.0</AssemblyVersion>
    <AssemblyVersion>2.1.0.0</AssemblyVersion>
  </AssemblyInfo>
  <AssemblyInfo>
    <AssemblyName>System.Transactions.Local</AssemblyName>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
    <AssemblyVersion>4.0.1.0</AssemblyVersion>
    <AssemblyVersion>4.0.2.0</AssemblyVersion>
    <AssemblyVersion>5.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <TypeForwardingChain>
    <TypeForwarding From="netstandard" FromVersion="2.1.0.0" To="System.Transactions.Local" ToVersion="5.0.0.0" FrameworkAlternate="net-5.0" />
  </TypeForwardingChain>
  <Interfaces>
    <Interface>
      <InterfaceName>System.Transactions.IEnlistmentNotification</InterfaceName>
    </Interface>
  </Interfaces>
  <Docs>
    <summary><span data-ttu-id="d1c2c-101">描述支持单阶段提交优化以参与事务的资源对象。</span><span class="sxs-lookup"><span data-stu-id="d1c2c-101">Describes a resource object that supports single phase commit optimization to participate in a transaction.</span></span></summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d1c2c-102">请注意，即使资源管理器实现此接口以支持单阶段提交优化，也不能保证它收到单阶段提交。</span><span class="sxs-lookup"><span data-stu-id="d1c2c-102">You should note that even when your resource manager implements this interface to support single phase commit optimization, it is not guaranteed that it receives a single phase commit.</span></span> <span data-ttu-id="d1c2c-103">事务管理器仍可以改为发送两阶段提交通知。</span><span class="sxs-lookup"><span data-stu-id="d1c2c-103">The transaction manager can still send two phase commit notifications instead.</span></span>  
  
 <span data-ttu-id="d1c2c-104">若要在事务中登记资源管理器作为参与者，请调用 <xref:System.Transactions.Transaction.EnlistVolatile%2A> 方法或 <xref:System.Transactions.Transaction.EnlistDurable%2A> 类的方法 <xref:System.Transactions.Transaction> 。</span><span class="sxs-lookup"><span data-stu-id="d1c2c-104">To enlist your resource manager as a participant in a transaction, call the <xref:System.Transactions.Transaction.EnlistVolatile%2A> method or the <xref:System.Transactions.Transaction.EnlistDurable%2A> method of the <xref:System.Transactions.Transaction> class.</span></span> <span data-ttu-id="d1c2c-105">具体而言， `EnlistmentOptions` 参数应该等于， <xref:System.Transactions.EnlistmentOptions.None> 以确保执行单阶段提交。</span><span class="sxs-lookup"><span data-stu-id="d1c2c-105">Specifically, the `EnlistmentOptions` parameter should equal to <xref:System.Transactions.EnlistmentOptions.None> to ensure that a single phase commit is performed.</span></span> <span data-ttu-id="d1c2c-106">如果错误地将其设置为 <xref:System.Transactions.EnlistmentOptions.EnlistDuringPrepareRequired> ，则不会发生单阶段提交。</span><span class="sxs-lookup"><span data-stu-id="d1c2c-106">If it is mistakenly set to <xref:System.Transactions.EnlistmentOptions.EnlistDuringPrepareRequired>, no single phase commit occurs.</span></span>  
  
 <span data-ttu-id="d1c2c-107">由于 <xref:System.Transactions.ISinglePhaseNotification> 接口派生自 <xref:System.Transactions.IEnlistmentNotification> 接口，因此，资源管理器还必须实现后两阶段提交通知的所有方法。</span><span class="sxs-lookup"><span data-stu-id="d1c2c-107">Since the <xref:System.Transactions.ISinglePhaseNotification> interface derives from the <xref:System.Transactions.IEnlistmentNotification> interface, the resource manager must also implement all the methods of the latter for two phase commit notifications.</span></span>  <span data-ttu-id="d1c2c-108">事务管理器的选择是将两阶段提交还是单阶段提交优化用于此资源管理器。</span><span class="sxs-lookup"><span data-stu-id="d1c2c-108">It is the transaction manager's choice as to whether two phase commit or the single phase commit optimization is used with this resource manager.</span></span>  <span data-ttu-id="d1c2c-109">但是，实现此接口会使资源管理器有机会在可用时使用优化。</span><span class="sxs-lookup"><span data-stu-id="d1c2c-109">However, implementing this interface gives the resource manager the opportunity to take advantage of the optimization when it is available.</span></span>  
  
 <span data-ttu-id="d1c2c-110">如果使用了优化并且事务管理器调用 <xref:System.Transactions.ISinglePhaseNotification.SinglePhaseCommit%2A> 了登记资源的方法，则资源管理器应使用类的各种方法来响应此调用， <xref:System.Transactions.SinglePhaseEnlistment> 以便在事务提交或回滚时通知事务管理器。</span><span class="sxs-lookup"><span data-stu-id="d1c2c-110">If the optimization is used and the transaction manager calls the <xref:System.Transactions.ISinglePhaseNotification.SinglePhaseCommit%2A> method of the enlisted resource, the resource manager should respond to this call by using various methods of the <xref:System.Transactions.SinglePhaseEnlistment> class to inform the transaction manager if the transaction is to be committed or rolled back.</span></span>  
  
 ]]></format>
    </remarks>
    <altmember cref="T:System.Transactions.IEnlistmentNotification" />
  </Docs>
  <Members>
    <Member MemberName="SinglePhaseCommit">
      <MemberSignature Language="C#" Value="public void SinglePhaseCommit (System.Transactions.SinglePhaseEnlistment singlePhaseEnlistment);" FrameworkAlternate="net-5.0;netcore-2.0;netcore-2.1;netcore-2.2;netcore-3.0;netcore-3.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8;netstandard-2.0;netstandard-2.1" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void SinglePhaseCommit(class System.Transactions.SinglePhaseEnlistment singlePhaseEnlistment) cil managed" FrameworkAlternate="net-5.0;netcore-2.0;netcore-2.1;netcore-2.2;netcore-3.0;netcore-3.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8;netstandard-2.0;netstandard-2.1" />
      <MemberSignature Language="DocId" Value="M:System.Transactions.ISinglePhaseNotification.SinglePhaseCommit(System.Transactions.SinglePhaseEnlistment)" />
      <MemberSignature Language="VB.NET" Value="Public Sub SinglePhaseCommit (singlePhaseEnlistment As SinglePhaseEnlistment)" FrameworkAlternate="net-5.0;netcore-2.0;netcore-2.1;netcore-2.2;netcore-3.0;netcore-3.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8;netstandard-2.0;netstandard-2.1" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; void SinglePhaseCommit(System::Transactions::SinglePhaseEnlistment ^ singlePhaseEnlistment);" FrameworkAlternate="net-5.0;netcore-2.0;netcore-2.1;netcore-2.2;netcore-3.0;netcore-3.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8;netstandard-2.0;netstandard-2.1" />
      <MemberSignature Language="F#" Value="abstract member SinglePhaseCommit : System.Transactions.SinglePhaseEnlistment -&gt; unit" Usage="iSinglePhaseNotification.SinglePhaseCommit singlePhaseEnlistment" FrameworkAlternate="net-5.0;netcore-2.0;netcore-2.1;netcore-2.2;netcore-3.0;netcore-3.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8;netstandard-2.0;netstandard-2.1" />
      <MemberSignature Language="C#" Value="public void SinglePhaseCommit (System.Transactions.SinglePhaseEnlistment enlistment);" FrameworkAlternate="xamarinandroid-7.1;xamarinios-10.8;xamarinmac-3.0" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void SinglePhaseCommit(class System.Transactions.SinglePhaseEnlistment enlistment) cil managed" FrameworkAlternate="xamarinandroid-7.1;xamarinios-10.8;xamarinmac-3.0" />
      <MemberSignature Language="VB.NET" Value="Public Sub SinglePhaseCommit (enlistment As SinglePhaseEnlistment)" FrameworkAlternate="xamarinandroid-7.1;xamarinios-10.8;xamarinmac-3.0" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; void SinglePhaseCommit(System::Transactions::SinglePhaseEnlistment ^ enlistment);" FrameworkAlternate="xamarinandroid-7.1;xamarinios-10.8;xamarinmac-3.0" />
      <MemberSignature Language="F#" Value="abstract member SinglePhaseCommit : System.Transactions.SinglePhaseEnlistment -&gt; unit" Usage="iSinglePhaseNotification.SinglePhaseCommit enlistment" FrameworkAlternate="xamarinandroid-7.1;xamarinios-10.8;xamarinmac-3.0" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Transactions</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>netstandard</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Transactions.Local</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
        <AssemblyVersion>4.0.2.0</AssemblyVersion>
        <AssemblyVersion>5.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="singlePhaseEnlistment" Type="System.Transactions.SinglePhaseEnlistment" Index="0" FrameworkAlternate="net-5.0;netcore-2.0;netcore-2.1;netcore-2.2;netcore-3.0;netcore-3.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8;netstandard-2.0;netstandard-2.1" />
        <Parameter Name="enlistment" Type="System.Transactions.SinglePhaseEnlistment" Index="0" FrameworkAlternate="xamarinandroid-7.1;xamarinios-10.8;xamarinmac-3.0" />
      </Parameters>
      <Docs>
        <param name="singlePhaseEnlistment"><span data-ttu-id="d1c2c-111">一个 <see cref="T:System.Transactions.SinglePhaseEnlistment" />，它用于将响应发送到事务管理器。</span><span class="sxs-lookup"><span data-stu-id="d1c2c-111">A <see cref="T:System.Transactions.SinglePhaseEnlistment" /> used to send a response to the transaction manager.</span></span></param>
        <param name="enlistment"><span data-ttu-id="d1c2c-112">一个 <see cref="T:System.Transactions.SinglePhaseEnlistment" />，它用于将响应发送到事务管理器。</span><span class="sxs-lookup"><span data-stu-id="d1c2c-112">A <see cref="T:System.Transactions.SinglePhaseEnlistment" /> used to send a response to the transaction manager.</span></span></param>
        <summary><span data-ttu-id="d1c2c-113">表示资源管理器的用于单阶段提交优化的回调实现。</span><span class="sxs-lookup"><span data-stu-id="d1c2c-113">Represents the resource manager's implementation of the callback for the single phase commit optimization.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d1c2c-114">事务管理器的选择是将两阶段提交还是单阶段提交优化用于此资源管理器。</span><span class="sxs-lookup"><span data-stu-id="d1c2c-114">It is the transaction manager's choice as to whether two phase commit or the single phase commit optimization is used with this resource manager.</span></span>  <span data-ttu-id="d1c2c-115">有关单阶段和两阶段提交的详细信息，请参阅 [在单阶段和多阶段提交事务](https://msdn.microsoft.com/library/74b3cfe1-d33a-45b8-91f4-dfd6f6598c4d)。</span><span class="sxs-lookup"><span data-stu-id="d1c2c-115">For more information on single phase and two phase commit, see [Committing A Transaction In Single-Phase and Multi-Phase](https://msdn.microsoft.com/library/74b3cfe1-d33a-45b8-91f4-dfd6f6598c4d).</span></span>  
  
 <span data-ttu-id="d1c2c-116">因此，在资源管理器的这一登记上，调用了 <xref:System.Transactions.ISinglePhaseNotification.SinglePhaseCommit%2A> 方法，或在接口中定义的两阶段提交方法被 <xref:System.Transactions.IEnlistmentNotification> 调用。</span><span class="sxs-lookup"><span data-stu-id="d1c2c-116">Therefore, on this enlistment of the resource manager, either the <xref:System.Transactions.ISinglePhaseNotification.SinglePhaseCommit%2A> method is called, or the two phase commit methods defined in the <xref:System.Transactions.IEnlistmentNotification> interface are called.</span></span>  
  
 <span data-ttu-id="d1c2c-117">此方法的实现应调用 <xref:System.Transactions.SinglePhaseEnlistment.Committed%2A> 方法或 <xref:System.Transactions.SinglePhaseEnlistment.Aborted%2A> 参数的方法 `singlePhaseEnlistment` ，以指示应提交还是回滚事务。</span><span class="sxs-lookup"><span data-stu-id="d1c2c-117">Your implementation of this method should call either the <xref:System.Transactions.SinglePhaseEnlistment.Committed%2A> method or the <xref:System.Transactions.SinglePhaseEnlistment.Aborted%2A> method of the `singlePhaseEnlistment` parameter to indicate whether the transaction should be committed or rolled back.</span></span>  
  
 <span data-ttu-id="d1c2c-118">当只有一个可变登记支持单阶段提交时，或者当有零个或多个可变登记和一个持久登记时，事务管理器将调用此方法。</span><span class="sxs-lookup"><span data-stu-id="d1c2c-118">The transaction manager calls this method when there is only one volatile enlistment that supports single phase commit, or when there are zero or more volatile enlistments and one durable enlistment.</span></span> <span data-ttu-id="d1c2c-119">在后一种情况下，易失性登记接收 <xref:System.Transactions.IEnlistmentNotification.Prepare%2A> 两阶段提交的通知，并且唯一持久登记收到单阶段提交通知。</span><span class="sxs-lookup"><span data-stu-id="d1c2c-119">In the latter case, the volatile enlistments receive <xref:System.Transactions.IEnlistmentNotification.Prepare%2A> notifications for two-phase-commit, and the sole durable enlistment receives a single-phase commit notification.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
  </Members>
</Type>
