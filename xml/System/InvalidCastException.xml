<Type Name="InvalidCastException" FullName="System.InvalidCastException">
  <Metadata><Meta Name="ms.openlocfilehash" Value="69d68ba699da9dec29cb34974ad5c2f6d669eb09" /><Meta Name="ms.sourcegitcommit" Value="b6b9d5f3f9c7eb43f14a8a1a68d044603cb8ed73" /><Meta Name="ms.translationtype" Value="MT" /><Meta Name="ms.contentlocale" Value="zh-CN" /><Meta Name="ms.lasthandoff" Value="05/18/2020" /><Meta Name="ms.locfileid" Value="83445996" /></Metadata><TypeSignature Language="C#" Value="public class InvalidCastException : Exception" FrameworkAlternate="dotnet-uwp-10.0;netcore-1.0;netcore-1.1;netstandard-1.0;netstandard-1.1;netstandard-1.2;netstandard-1.3;netstandard-1.4;netstandard-1.5;netstandard-1.6" />
  <TypeSignature Language="ILAsm" Value=".class public auto ansi beforefieldinit InvalidCastException extends System.Exception" FrameworkAlternate="dotnet-uwp-10.0;netcore-1.0;netcore-1.1;netstandard-1.0;netstandard-1.1;netstandard-1.2;netstandard-1.3;netstandard-1.4;netstandard-1.5;netstandard-1.6" />
  <TypeSignature Language="DocId" Value="T:System.InvalidCastException" />
  <TypeSignature Language="VB.NET" Value="Public Class InvalidCastException&#xA;Inherits Exception" FrameworkAlternate="dotnet-uwp-10.0;netcore-1.0;netcore-1.1;netstandard-1.0;netstandard-1.1;netstandard-1.2;netstandard-1.3;netstandard-1.4;netstandard-1.5;netstandard-1.6" />
  <TypeSignature Language="C++ CLI" Value="public ref class InvalidCastException : Exception" FrameworkAlternate="dotnet-uwp-10.0;netcore-1.0;netcore-1.1;netstandard-1.0;netstandard-1.1;netstandard-1.2;netstandard-1.3;netstandard-1.4;netstandard-1.5;netstandard-1.6" />
  <TypeSignature Language="F#" Value="type InvalidCastException = class&#xA;    inherit Exception" FrameworkAlternate="dotnet-uwp-10.0;netcore-1.0;netcore-1.1;netstandard-1.0;netstandard-1.1;netstandard-1.2;netstandard-1.3;netstandard-1.4;netstandard-1.5;netstandard-1.6" />
  <TypeSignature Language="C#" Value="public class InvalidCastException : SystemException" FrameworkAlternate="net-5.0;netcore-2.0;netcore-2.1;netcore-2.2;netcore-3.0;netcore-3.1;netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8;netstandard-2.0;netstandard-2.1;xamarinandroid-7.1;xamarinios-10.8;xamarinmac-3.0" />
  <TypeSignature Language="ILAsm" Value=".class public auto ansi beforefieldinit InvalidCastException extends System.SystemException" FrameworkAlternate="net-5.0;netcore-2.0;netcore-2.1;netcore-2.2;netcore-3.0;netcore-3.1;netstandard-2.0;netstandard-2.1" />
  <TypeSignature Language="VB.NET" Value="Public Class InvalidCastException&#xA;Inherits SystemException" FrameworkAlternate="net-5.0;netcore-2.0;netcore-2.1;netcore-2.2;netcore-3.0;netcore-3.1;netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8;netstandard-2.0;netstandard-2.1;xamarinandroid-7.1;xamarinios-10.8;xamarinmac-3.0" />
  <TypeSignature Language="C++ CLI" Value="public ref class InvalidCastException : SystemException" FrameworkAlternate="net-5.0;netcore-2.0;netcore-2.1;netcore-2.2;netcore-3.0;netcore-3.1;netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8;netstandard-2.0;netstandard-2.1;xamarinandroid-7.1;xamarinios-10.8;xamarinmac-3.0" />
  <TypeSignature Language="F#" Value="type InvalidCastException = class&#xA;    inherit SystemException" FrameworkAlternate="net-5.0;netcore-2.0;netcore-2.1;netcore-2.2;netcore-3.0;netcore-3.1;netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8;netstandard-2.0;netstandard-2.1;xamarinandroid-7.1;xamarinios-10.8;xamarinmac-3.0" />
  <TypeSignature Language="ILAsm" Value=".class public auto ansi serializable beforefieldinit InvalidCastException extends System.SystemException" FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8;xamarinandroid-7.1;xamarinios-10.8;xamarinmac-3.0" />
  <AssemblyInfo>
    <AssemblyName>System.Runtime</AssemblyName>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
    <AssemblyVersion>4.0.10.0</AssemblyVersion>
    <AssemblyVersion>4.0.20.0</AssemblyVersion>
    <AssemblyVersion>4.1.0.0</AssemblyVersion>
    <AssemblyVersion>4.2.0.0</AssemblyVersion>
    <AssemblyVersion>4.2.1.0</AssemblyVersion>
    <AssemblyVersion>4.2.2.0</AssemblyVersion>
    <AssemblyVersion>5.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <AssemblyInfo>
    <AssemblyName>mscorlib</AssemblyName>
    <AssemblyVersion>1.0.5000.0</AssemblyVersion>
    <AssemblyVersion>2.0.0.0</AssemblyVersion>
    <AssemblyVersion>2.0.5.0</AssemblyVersion>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <AssemblyInfo>
    <AssemblyName>netstandard</AssemblyName>
    <AssemblyVersion>2.0.0.0</AssemblyVersion>
    <AssemblyVersion>2.1.0.0</AssemblyVersion>
  </AssemblyInfo>
  <TypeForwardingChain>
    <TypeForwarding From="mscorlib" FromVersion="4.0.0.0" To="System.Runtime" ToVersion="0.0.0.0" FrameworkAlternate="dotnet-uwp-10.0" />
    <TypeForwarding From="netstandard" FromVersion="2.1.0.0" To="System.Runtime" ToVersion="5.0.0.0" FrameworkAlternate="net-5.0" />
  </TypeForwardingChain>
  <Base>
    <BaseTypeName>System.Exception</BaseTypeName>
    <BaseTypeName FrameworkAlternate="net-5.0;netcore-2.0;netcore-2.1;netcore-2.2;netcore-3.0;netcore-3.1;netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8;netstandard-2.0;netstandard-2.1;xamarinandroid-7.1;xamarinios-10.8;xamarinmac-3.0">System.SystemException</BaseTypeName>
  </Base>
  <Interfaces />
  <Attributes>
    <Attribute FrameworkAlternate="netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinandroid-7.1;xamarinios-10.8;xamarinmac-3.0;netframework-4.8">
      <AttributeName>System.Runtime.InteropServices.ComVisible(true)</AttributeName>
    </Attribute>
    <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8;xamarinandroid-7.1;xamarinios-10.8;xamarinmac-3.0">
      <AttributeName>System.Serializable</AttributeName>
    </Attribute>
  </Attributes>
  <Docs>
    <summary><span data-ttu-id="519c4-101">当执行了无效的强制转换或显式转换时引发的异常。</span><span class="sxs-lookup"><span data-stu-id="519c4-101">The exception that is thrown for invalid casting or explicit conversion.</span></span></summary>
    <remarks>
      <format type="text/markdown"><![CDATA[

## Remarks

<span data-ttu-id="519c4-102">.NET Framework 支持从派生类型到它们的基类型的自动转换并返回到派生的类型，以及向 interface 对象和背面提供接口的类型的自动转换。</span><span class="sxs-lookup"><span data-stu-id="519c4-102">.NET Framework supports automatic conversion from derived types to their base types and back to the derived type, as well as from types that present interfaces to interface objects and back.</span></span> <span data-ttu-id="519c4-103">它还包括支持自定义转换的各种机制。</span><span class="sxs-lookup"><span data-stu-id="519c4-103">It also includes a variety of mechanisms that support custom conversions.</span></span> <span data-ttu-id="519c4-104">有关详细信息，请参阅[.NET Framework 中的类型转换](~/docs/standard/base-types/type-conversion.md)。</span><span class="sxs-lookup"><span data-stu-id="519c4-104">For more information, see [Type Conversion in .NET Framework](~/docs/standard/base-types/type-conversion.md).</span></span>

<span data-ttu-id="519c4-105">如果不支持将一个类型的实例转换为另一种类型，则会引发 <xref:System.InvalidCastException> 异常。</span><span class="sxs-lookup"><span data-stu-id="519c4-105">An <xref:System.InvalidCastException> exception is thrown when the conversion of an instance of one type to another type is not supported.</span></span> <span data-ttu-id="519c4-106">例如，如果尝试将 <xref:System.Char> 值转换为 <xref:System.DateTime> 值，将引发 <xref:System.InvalidCastException> 异常。</span><span class="sxs-lookup"><span data-stu-id="519c4-106">For example, attempting to convert a <xref:System.Char> value to a <xref:System.DateTime> value throws an <xref:System.InvalidCastException> exception.</span></span> <span data-ttu-id="519c4-107">它与 <xref:System.OverflowException> 异常不同，后者是在支持一种类型到另一种类型的转换时引发的，但源类型的值超出了目标类型的范围。</span><span class="sxs-lookup"><span data-stu-id="519c4-107">It differs from an <xref:System.OverflowException> exception, which is thrown when a conversion of one type to another is supported, but the value of the source type is outside the range of the target type.</span></span> <span data-ttu-id="519c4-108"><xref:System.InvalidCastException> 异常是由开发人员错误引起的，不应在 `try/catch` 块中进行处理。</span><span class="sxs-lookup"><span data-stu-id="519c4-108">An <xref:System.InvalidCastException> exception is caused by developer error and should not be handled in a `try/catch` block.</span></span> <span data-ttu-id="519c4-109">相反，应该消除异常的原因。</span><span class="sxs-lookup"><span data-stu-id="519c4-109">Instead, the cause of the exception should be eliminated.</span></span>

<span data-ttu-id="519c4-110">有关系统支持的转换的信息，请参阅 <xref:System.Convert> 类。</span><span class="sxs-lookup"><span data-stu-id="519c4-110">For information about conversions supported by the system, see the <xref:System.Convert> class.</span></span> <span data-ttu-id="519c4-111">对于在目标类型可以存储源类型值但不能存储特定源值时所发生的错误，请参阅 <xref:System.OverflowException> 异常。</span><span class="sxs-lookup"><span data-stu-id="519c4-111">For errors that occur when the destination type can store source type values but is not large enough to store a specific source value, see the <xref:System.OverflowException> exception.</span></span>

> [!NOTE]
> <span data-ttu-id="519c4-112">在许多情况下，语言编译器检测到源类型和目标类型之间不存在转换，并发出编译器错误。</span><span class="sxs-lookup"><span data-stu-id="519c4-112">In many cases, your language compiler detects that no conversion exists between the source type and the target type and issues a compiler error.</span></span>

<span data-ttu-id="519c4-113">尝试转换的某些条件会引发 <xref:System.InvalidCastException> 异常，如以下部分所述：</span><span class="sxs-lookup"><span data-stu-id="519c4-113">Some of the conditions under which an attempted conversion throws an <xref:System.InvalidCastException> exception are discussed in the following sections:</span></span>

- [<span data-ttu-id="519c4-114">基元类型和 IConvertible</span><span class="sxs-lookup"><span data-stu-id="519c4-114">Primitive types and IConvertible</span></span>](#Primitive)
- [<span data-ttu-id="519c4-115">ChangeType 方法</span><span class="sxs-lookup"><span data-stu-id="519c4-115">The Convert.ChangeType method</span></span>](#ChangeType)
- [<span data-ttu-id="519c4-116">收缩转换和 IConvertible 实现</span><span class="sxs-lookup"><span data-stu-id="519c4-116">Narrowing conversions and IConvertible implementations</span></span>](#Narrowing)
- [<span data-ttu-id="519c4-117">Downcasting</span><span class="sxs-lookup"><span data-stu-id="519c4-117">Downcasting</span></span>](#Downcasting)
- [<span data-ttu-id="519c4-118">从接口对象转换</span><span class="sxs-lookup"><span data-stu-id="519c4-118">Conversion from an interface object</span></span>](#Interface)
- [<span data-ttu-id="519c4-119">字符串转换</span><span class="sxs-lookup"><span data-stu-id="519c4-119">String conversions</span></span>](#String)
- [<span data-ttu-id="519c4-120">Visual Basic 6.0 迁移</span><span class="sxs-lookup"><span data-stu-id="519c4-120">Visual Basic 6.0 migration</span></span>](#Migration)

<span data-ttu-id="519c4-121">为了使显式引用转换成功，源值必须为 `null`，或者源参数引用的对象类型必须可通过隐式引用转换转换为目标类型。</span><span class="sxs-lookup"><span data-stu-id="519c4-121">For an explicit reference conversion to be successful, the source value must be `null`, or the object type referenced by the source argument must be convertible to the destination type by an implicit reference conversion.</span></span>

<span data-ttu-id="519c4-122">以下中间语言（IL）指令引发 <xref:System.InvalidCastException> 异常：</span><span class="sxs-lookup"><span data-stu-id="519c4-122">The following intermediate language (IL) instructions throw an <xref:System.InvalidCastException> exception:</span></span>

-   `castclass`

-   `refanyval`

-   `unbox`

<span data-ttu-id="519c4-123"><xref:System.InvalidCastException> 使用值为0x80004002 的 HRESULT COR_E_INVALIDCAST。</span><span class="sxs-lookup"><span data-stu-id="519c4-123"><xref:System.InvalidCastException> uses the HRESULT COR_E_INVALIDCAST, which has the value 0x80004002.</span></span>

<span data-ttu-id="519c4-124">有关实例的初始属性值的列表<xref:System.InvalidCastException>，请参阅<xref:System.InvalidCastException.%23ctor%2A>构造函数。</span><span class="sxs-lookup"><span data-stu-id="519c4-124">For a list of initial property values for an instance of <xref:System.InvalidCastException>, see the <xref:System.InvalidCastException.%23ctor%2A> constructors.</span></span>

<a name="Primitive"></a>
## <a name="primitive-types-and-iconvertible"></a><span data-ttu-id="519c4-125">基元类型和 IConvertible</span><span class="sxs-lookup"><span data-stu-id="519c4-125">Primitive types and IConvertible</span></span>
 <span data-ttu-id="519c4-126">直接或间接调用不支持特定转换的基元类型的 <xref:System.IConvertible> 实现。</span><span class="sxs-lookup"><span data-stu-id="519c4-126">You directly or indirectly call a primitive type's <xref:System.IConvertible> implementation that does not support a particular conversion.</span></span> <span data-ttu-id="519c4-127">例如，尝试将 <xref:System.Boolean> 值转换为 <xref:System.Char> 或将 <xref:System.DateTime> 值转换为 <xref:System.Int32> 将引发 <xref:System.InvalidCastException> 异常。</span><span class="sxs-lookup"><span data-stu-id="519c4-127">For example, trying to convert a <xref:System.Boolean> value to a <xref:System.Char> or a <xref:System.DateTime> value to an <xref:System.Int32> throws an <xref:System.InvalidCastException> exception.</span></span> <span data-ttu-id="519c4-128">下面的示例调用 <xref:System.Boolean.System%23IConvertible%23ToChar%2A?displayProperty=nameWithType> 和 <xref:System.Convert.ToChar%28System.Boolean%29?displayProperty=nameWithType> 方法将 <xref:System.Boolean> 值转换为 <xref:System.Char>。</span><span class="sxs-lookup"><span data-stu-id="519c4-128">The following example calls both the <xref:System.Boolean.System%23IConvertible%23ToChar%2A?displayProperty=nameWithType> and <xref:System.Convert.ToChar%28System.Boolean%29?displayProperty=nameWithType> methods to convert a <xref:System.Boolean> value to a <xref:System.Char>.</span></span> <span data-ttu-id="519c4-129">在这两种情况下，方法调用都将引发 <xref:System.InvalidCastException> 异常。</span><span class="sxs-lookup"><span data-stu-id="519c4-129">In both cases, the method call throws an <xref:System.InvalidCastException> exception.</span></span>

 [!code-csharp[System.InvalidCastException#2](~/samples/snippets/csharp/VS_Snippets_CLR_System/system.invalidcastexception/cs/iconvertible1.cs#2)]
 [!code-vb[System.InvalidCastException#2](~/samples/snippets/visualbasic/VS_Snippets_CLR_System/system.invalidcastexception/vb/iconvertible1.vb#2)]

 <span data-ttu-id="519c4-130">由于转换不受支持，因此没有解决方法。</span><span class="sxs-lookup"><span data-stu-id="519c4-130">Because the conversion is not supported, there is no workaround.</span></span>

<a name="ChangeType"></a>
## <a name="the-convertchangetype-method"></a><span data-ttu-id="519c4-131">ChangeType 方法</span><span class="sxs-lookup"><span data-stu-id="519c4-131">The Convert.ChangeType method</span></span>
 <span data-ttu-id="519c4-132">已调用 <xref:System.Convert.ChangeType%2A?displayProperty=nameWithType> 方法将对象从一种类型转换为另一种类型，但两种或两种类型都不实现 <xref:System.IConvertible> 接口。</span><span class="sxs-lookup"><span data-stu-id="519c4-132">You've called the <xref:System.Convert.ChangeType%2A?displayProperty=nameWithType> method to convert an object from one type to another, but one or both types don't implement the <xref:System.IConvertible> interface.</span></span>

 <span data-ttu-id="519c4-133">在大多数情况下，由于不支持转换，因此没有解决方法。</span><span class="sxs-lookup"><span data-stu-id="519c4-133">In most cases, because the conversion is not supported, there is no workaround.</span></span> <span data-ttu-id="519c4-134">在某些情况下，一种可能的解决方法是将属性值从源类型手动分配给目标类型的类似属性。</span><span class="sxs-lookup"><span data-stu-id="519c4-134">In some cases, a possible workaround is to manually assign property values from the source type to similar properties of a the target type.</span></span>

<a name="Narrowing"></a>
## <a name="narrowing-conversions-and-iconvertible-implementations"></a><span data-ttu-id="519c4-135">收缩转换和 IConvertible 实现</span><span class="sxs-lookup"><span data-stu-id="519c4-135">Narrowing conversions and IConvertible implementations</span></span>
 <span data-ttu-id="519c4-136">收缩运算符定义类型支持的显式转换。</span><span class="sxs-lookup"><span data-stu-id="519c4-136">Narrowing operators define the explicit conversions supported by a type.</span></span>  <span data-ttu-id="519c4-137">中C#的转换运算符或 Visual Basic 中的 `CType` 转换方法（如果 `Option Strict` 为 on）需要执行转换。</span><span class="sxs-lookup"><span data-stu-id="519c4-137">A casting operator in C# or the `CType` conversion method in Visual Basic (if `Option Strict` is on)  is required to perform the conversion.</span></span>

 <span data-ttu-id="519c4-138">但是，如果源类型和目标类型都不定义两个类型之间的显式转换或收缩转换，并且一个或两个类型的 <xref:System.IConvertible> 实现不支持从源类型到目标类型的转换，则会引发 <xref:System.InvalidCastException> 异常。</span><span class="sxs-lookup"><span data-stu-id="519c4-138">However, if neither the source type nor the target type defines an explicit or narrowing conversion between the two types, and the <xref:System.IConvertible> implementation of one or both types doesn't support a conversion from the source type to the target type, an <xref:System.InvalidCastException> exception is thrown.</span></span>

 <span data-ttu-id="519c4-139">在大多数情况下，由于不支持转换，因此没有解决方法。</span><span class="sxs-lookup"><span data-stu-id="519c4-139">In most cases, because the conversion is not supported, there is no workaround.</span></span>

<a name="Downcasting"></a>
## <a name="downcasting"></a><span data-ttu-id="519c4-140">Downcasting</span><span class="sxs-lookup"><span data-stu-id="519c4-140">Downcasting</span></span>
 <span data-ttu-id="519c4-141">你是 downcasting 的，也就是说，尝试将基类型的实例转换为它的派生类型之一。</span><span class="sxs-lookup"><span data-stu-id="519c4-141">You are downcasting, that is, trying to convert an instance of a base type to one of its derived types.</span></span> <span data-ttu-id="519c4-142">在下面的示例中，尝试将 `Person` 对象转换为 `PersonWithID` 的对象失败。</span><span class="sxs-lookup"><span data-stu-id="519c4-142">In the following example, trying to convert a `Person` object to a `PersonWithID` object fails.</span></span>

 [!code-csharp[System.InvalidCastException#1](~/samples/snippets/csharp/VS_Snippets_CLR_System/system.invalidcastexception/cs/basetoderived1.cs#1)]
 [!code-vb[System.InvalidCastException#1](~/samples/snippets/visualbasic/VS_Snippets_CLR_System/system.invalidcastexception/vb/basetoderived1.vb#1)]

 <span data-ttu-id="519c4-143">如示例所示，仅当 `Person` 对象是通过从 `PersonWithId` 对象到 `Person` 对象的向上转换创建的，或者如果 `Person` 的对象 `null`，则向下转换将会成功。</span><span class="sxs-lookup"><span data-stu-id="519c4-143">As the example shows, the downcast succeeds only if the `Person` object was created by an upcast from a `PersonWithId` object to a `Person` object, or if the `Person` object is `null`.</span></span>

<a name="Interface"></a>
## <a name="conversion-from-an-interface-object"></a><span data-ttu-id="519c4-144">从接口对象转换</span><span class="sxs-lookup"><span data-stu-id="519c4-144">Conversion from an interface object</span></span>
 <span data-ttu-id="519c4-145">您正在尝试将接口对象转换为实现该接口的类型，但目标类型不是同一类型，或者是该接口对象最初派生自的类型的基类。</span><span class="sxs-lookup"><span data-stu-id="519c4-145">You are attempting to convert an interface object to a type that  implements that interface, but the target type is not the same type or a base class of the type from which the interface object was originally derived.</span></span> <span data-ttu-id="519c4-146">下面的示例在尝试将 <xref:System.IFormatProvider> 对象转换为 <xref:System.Globalization.DateTimeFormatInfo> 对象时，会引发 <xref:System.InvalidCastException> 异常。</span><span class="sxs-lookup"><span data-stu-id="519c4-146">The following example throws an <xref:System.InvalidCastException> exception when it attempts to convert an <xref:System.IFormatProvider> object  to a <xref:System.Globalization.DateTimeFormatInfo> object.</span></span> <span data-ttu-id="519c4-147">由于 <xref:System.Globalization.DateTimeFormatInfo> 类实现 <xref:System.IFormatProvider> 接口，转换失败，<xref:System.Globalization.DateTimeFormatInfo> 对象与从中派生接口对象的 <xref:System.Globalization.CultureInfo> 类无关。</span><span class="sxs-lookup"><span data-stu-id="519c4-147">The conversion fails because although the <xref:System.Globalization.DateTimeFormatInfo> class implements the <xref:System.IFormatProvider> interface, the <xref:System.Globalization.DateTimeFormatInfo> object is not related to the <xref:System.Globalization.CultureInfo> class from which  the interface object was derived.</span></span>

 [!code-csharp[System.InvalidCastException#3](~/samples/snippets/csharp/VS_Snippets_CLR_System/system.invalidcastexception/cs/Interface1.cs#3)]
 [!code-vb[System.InvalidCastException#3](~/samples/snippets/visualbasic/VS_Snippets_CLR_System/system.invalidcastexception/vb/Interface1.vb#3)]

 <span data-ttu-id="519c4-148">如异常消息所示，仅当接口对象转换回原始类型的实例（在本例中为 <xref:System.Globalization.CultureInfo>）时，转换才会成功。</span><span class="sxs-lookup"><span data-stu-id="519c4-148">As the exception message indicates, the conversion would succeed only if the interface object is converted back to an instance of the original type, in this case a  <xref:System.Globalization.CultureInfo>.</span></span> <span data-ttu-id="519c4-149">如果接口对象转换为原始类型的基类型的实例，则此转换也会成功。</span><span class="sxs-lookup"><span data-stu-id="519c4-149">The conversion would also succeed if the interface object is converted to an instance of a base type of the original type.</span></span>

<a name="String"></a>
## <a name="string-conversions"></a><span data-ttu-id="519c4-150">字符串转换</span><span class="sxs-lookup"><span data-stu-id="519c4-150">String conversions</span></span>
 <span data-ttu-id="519c4-151">尝试使用中C#的转换运算符将值或对象转换为其字符串表示形式。</span><span class="sxs-lookup"><span data-stu-id="519c4-151">You are trying to convert a value or an object to its string representation by using a casting operator in C#.</span></span> <span data-ttu-id="519c4-152">在下面的示例中，尝试将 <xref:System.Char> 值强制转换为字符串，并尝试将整数转换为字符串会引发 <xref:System.InvalidCastException> 异常。</span><span class="sxs-lookup"><span data-stu-id="519c4-152">In the following example, both the attempt to cast a <xref:System.Char> value to a string and the attempt to cast an integer to a string throw an <xref:System.InvalidCastException> exception.</span></span>

 [!code-csharp[System.InvalidCastException#4](~/samples/snippets/csharp/VS_Snippets_CLR_System/system.invalidcastexception/cs/ToString1.cs#4)]

> [!NOTE]
>  <span data-ttu-id="519c4-153">使用 Visual Basic `CStr` 运算符可将基元类型的值转换为字符串。</span><span class="sxs-lookup"><span data-stu-id="519c4-153">Using the Visual Basic `CStr` operator to convert a value of a primitive type to a string succeeds.</span></span> <span data-ttu-id="519c4-154">此操作不会引发 <xref:System.InvalidCastException> 异常。</span><span class="sxs-lookup"><span data-stu-id="519c4-154">The operation does not throw an <xref:System.InvalidCastException> exception.</span></span>

 <span data-ttu-id="519c4-155">若要成功将任何类型的实例转换为其字符串表示形式，请调用其 `ToString` 方法，如以下示例所示。</span><span class="sxs-lookup"><span data-stu-id="519c4-155">To successfully convert an instance of any type to its string representation, call its `ToString` method, as the following example does.</span></span> <span data-ttu-id="519c4-156">`ToString` 方法始终存在，因为 <xref:System.Object.ToString%2A> 方法由 <xref:System.Object> 类定义，因此由所有托管类型继承或重写。</span><span class="sxs-lookup"><span data-stu-id="519c4-156">The `ToString` method is always present, since the <xref:System.Object.ToString%2A> method is defined by the <xref:System.Object> class and therefore is either inherited or overridden by all managed types.</span></span>

 [!code-csharp[System.InvalidCastException#5](~/samples/snippets/csharp/VS_Snippets_CLR_System/system.invalidcastexception/cs/ToString2.cs#5)]

<a name="Migration"></a>
## <a name="visual-basic-60-migration"></a><span data-ttu-id="519c4-157">Visual Basic 6.0 迁移</span><span class="sxs-lookup"><span data-stu-id="519c4-157">Visual Basic 6.0 migration</span></span>
 <span data-ttu-id="519c4-158">使用用户控件中的自定义事件调用来升级 Visual Basic 6.0 应用程序以 Visual Basic .NET，并引发 <xref:System.InvalidCastException> 异常，同时出现消息 "指定的强制转换无效"。</span><span class="sxs-lookup"><span data-stu-id="519c4-158">You're upgrading a Visual Basic 6.0 application with a call to a custom event in a user control to Visual Basic .NET, and an <xref:System.InvalidCastException> exception is thrown with the message, "Specified cast is not valid."</span></span> <span data-ttu-id="519c4-159">若要消除此异常，请更改窗体中的代码行（如 `Form1`）</span><span class="sxs-lookup"><span data-stu-id="519c4-159">To eliminate this exception, change the line of code in your form (such as `Form1`)</span></span>

```
Call UserControl11_MyCustomEvent(UserControl11, New UserControl1.MyCustomEventEventArgs(5))
```

 <span data-ttu-id="519c4-160">并将其替换为以下代码行：</span><span class="sxs-lookup"><span data-stu-id="519c4-160">and replace it with the following line of code:</span></span>

```
Call UserControl11_MyCustomEvent(UserControl11(0), New UserControl1.MyCustomEventEventArgs(5))
```

 ]]></format>
    </remarks>
    <altmember cref="T:System.Exception" />
    <related type="Article" href="~/docs/standard/exceptions/index.md"><span data-ttu-id="519c4-161">处理和引发异常</span><span class="sxs-lookup"><span data-stu-id="519c4-161">Handling and Throwing Exceptions</span></span></related>
    <related type="Article" href="~/docs/standard/base-types/type-conversion.md"><span data-ttu-id="519c4-162">.NET Framework 中的类型转换</span><span class="sxs-lookup"><span data-stu-id="519c4-162">Type Conversion in the .NET Framework</span></span></related>
  </Docs>
  <Members>
    <MemberGroup MemberName=".ctor">
      <AssemblyInfo>
        <AssemblyName>System.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.10.0</AssemblyVersion>
        <AssemblyVersion>4.0.20.0</AssemblyVersion>
        <AssemblyVersion>4.1.0.0</AssemblyVersion>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Docs>
        <summary><span data-ttu-id="519c4-163">初始化 <see cref="T:System.InvalidCastException" /> 类的新实例。</span><span class="sxs-lookup"><span data-stu-id="519c4-163">Initializes a new instance of the <see cref="T:System.InvalidCastException" /> class.</span></span></summary>
      </Docs>
    </MemberGroup>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public InvalidCastException ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.InvalidCastException.#ctor" />
      <MemberSignature Language="VB.NET" Value="Public Sub New ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; InvalidCastException();" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.10.0</AssemblyVersion>
        <AssemblyVersion>4.0.20.0</AssemblyVersion>
        <AssemblyVersion>4.1.0.0</AssemblyVersion>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
        <AssemblyVersion>4.2.1.0</AssemblyVersion>
        <AssemblyVersion>4.2.2.0</AssemblyVersion>
        <AssemblyVersion>5.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>mscorlib</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>netstandard</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="519c4-164">初始化 <see cref="T:System.InvalidCastException" /> 类的新实例。</span><span class="sxs-lookup"><span data-stu-id="519c4-164">Initializes a new instance of the <see cref="T:System.InvalidCastException" /> class.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="519c4-165">此构造函数将新实例的 <xref:System.Exception.Message%2A> 属性初始化为系统提供的描述错误的消息，例如 "无法从源类型强制转换为目标类型"。</span><span class="sxs-lookup"><span data-stu-id="519c4-165">This constructor initializes the <xref:System.Exception.Message%2A> property of the new instance to a system-supplied message that describes the error, such as "Cannot cast from source type to destination type."</span></span> <span data-ttu-id="519c4-166">此消息会考虑当前系统区域性。</span><span class="sxs-lookup"><span data-stu-id="519c4-166">This message takes into account the current system culture.</span></span>

 <span data-ttu-id="519c4-167">下表显示了 <xref:System.InvalidCastException> 实例的初始属性值。</span><span class="sxs-lookup"><span data-stu-id="519c4-167">The following table shows the initial property values for an instance of <xref:System.InvalidCastException>.</span></span>

|<span data-ttu-id="519c4-168">属性</span><span class="sxs-lookup"><span data-stu-id="519c4-168">Property</span></span>|<span data-ttu-id="519c4-169">值</span><span class="sxs-lookup"><span data-stu-id="519c4-169">Value</span></span>|
|--------------|-----------|
|<xref:System.Exception.InnerException%2A>|<span data-ttu-id="519c4-170">空引用（在 Visual Basic 中为 `Nothing`）。</span><span class="sxs-lookup"><span data-stu-id="519c4-170">A null reference (`Nothing` in Visual Basic).</span></span>|
|<xref:System.Exception.Message%2A>|<span data-ttu-id="519c4-171">本地化的错误消息字符串。</span><span class="sxs-lookup"><span data-stu-id="519c4-171">The localized error message string.</span></span>|

 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public InvalidCastException (string message);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor(string message) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.InvalidCastException.#ctor(System.String)" />
      <MemberSignature Language="VB.NET" Value="Public Sub New (message As String)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; InvalidCastException(System::String ^ message);" />
      <MemberSignature Language="F#" Value="new InvalidCastException : string -&gt; InvalidCastException" Usage="new System.InvalidCastException message" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.10.0</AssemblyVersion>
        <AssemblyVersion>4.0.20.0</AssemblyVersion>
        <AssemblyVersion>4.1.0.0</AssemblyVersion>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
        <AssemblyVersion>4.2.1.0</AssemblyVersion>
        <AssemblyVersion>4.2.2.0</AssemblyVersion>
        <AssemblyVersion>5.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>mscorlib</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>netstandard</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Parameters>
        <Parameter Name="message" Type="System.String" />
      </Parameters>
      <Docs>
        <param name="message"><span data-ttu-id="519c4-172">用于描述错误的消息。</span><span class="sxs-lookup"><span data-stu-id="519c4-172">The message that describes the error.</span></span></param>
        <summary><span data-ttu-id="519c4-173">用指定的错误消息初始化 <see cref="T:System.InvalidCastException" /> 类的新实例。</span><span class="sxs-lookup"><span data-stu-id="519c4-173">Initializes a new instance of the <see cref="T:System.InvalidCastException" /> class with a specified error message.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="519c4-174">此构造函数使用 `message` 参数初始化新异常的 <xref:System.Exception.Message%2A?displayProperty=nameWithType> 属性。</span><span class="sxs-lookup"><span data-stu-id="519c4-174">This constructor initializes the <xref:System.Exception.Message%2A?displayProperty=nameWithType> property of the new exception using the `message` parameter.</span></span> <span data-ttu-id="519c4-175">`message` 的内容设计为易于理解。</span><span class="sxs-lookup"><span data-stu-id="519c4-175">The content of `message` is intended to be understood by humans.</span></span> <span data-ttu-id="519c4-176">此构造函数的调用方需要确保此字符串已针对当前系统区域性进行了本地化。</span><span class="sxs-lookup"><span data-stu-id="519c4-176">The caller of this constructor is required to ensure that this string has been localized for the current system culture.</span></span>

 <span data-ttu-id="519c4-177">下表显示了 <xref:System.InvalidCastException> 实例的初始属性值。</span><span class="sxs-lookup"><span data-stu-id="519c4-177">The following table shows the initial property values for an instance of <xref:System.InvalidCastException>.</span></span>

|<span data-ttu-id="519c4-178">属性</span><span class="sxs-lookup"><span data-stu-id="519c4-178">Property</span></span>|<span data-ttu-id="519c4-179">值</span><span class="sxs-lookup"><span data-stu-id="519c4-179">Value</span></span>|
|--------------|-----------|
|<xref:System.Exception.InnerException%2A>|<span data-ttu-id="519c4-180">空引用（在 Visual Basic 中为 `Nothing`）。</span><span class="sxs-lookup"><span data-stu-id="519c4-180">A null reference (`Nothing` in Visual Basic).</span></span>|
|<xref:System.Exception.Message%2A>|<span data-ttu-id="519c4-181">错误消息字符串。</span><span class="sxs-lookup"><span data-stu-id="519c4-181">The error message string.</span></span>|

 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="protected InvalidCastException (System.Runtime.Serialization.SerializationInfo info, System.Runtime.Serialization.StreamingContext context);" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig specialname rtspecialname instance void .ctor(class System.Runtime.Serialization.SerializationInfo info, valuetype System.Runtime.Serialization.StreamingContext context) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.InvalidCastException.#ctor(System.Runtime.Serialization.SerializationInfo,System.Runtime.Serialization.StreamingContext)" />
      <MemberSignature Language="VB.NET" Value="Protected Sub New (info As SerializationInfo, context As StreamingContext)" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; InvalidCastException(System::Runtime::Serialization::SerializationInfo ^ info, System::Runtime::Serialization::StreamingContext context);" />
      <MemberSignature Language="F#" Value="new InvalidCastException : System.Runtime.Serialization.SerializationInfo * System.Runtime.Serialization.StreamingContext -&gt; InvalidCastException" Usage="new System.InvalidCastException (info, context)" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>mscorlib</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>netstandard</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Runtime</AssemblyName>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
        <AssemblyVersion>4.2.1.0</AssemblyVersion>
        <AssemblyVersion>4.2.2.0</AssemblyVersion>
        <AssemblyVersion>5.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>System.Security.SecuritySafeCritical</AttributeName>
        </Attribute>
      </Attributes>
      <Parameters>
        <Parameter Name="info" Type="System.Runtime.Serialization.SerializationInfo" Index="0" FrameworkAlternate="netcore-2.0;netcore-2.1;netcore-2.2;netcore-3.0;netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8;netstandard-2.0;xamarinandroid-7.1;xamarinios-10.8;xamarinmac-3.0;netstandard-2.1;netcore-3.1;net-5.0" />
        <Parameter Name="context" Type="System.Runtime.Serialization.StreamingContext" Index="1" FrameworkAlternate="netcore-2.0;netcore-2.1;netcore-2.2;netcore-3.0;netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8;netstandard-2.0;xamarinandroid-7.1;xamarinios-10.8;xamarinmac-3.0;netstandard-2.1;netcore-3.1;net-5.0" />
      </Parameters>
      <Docs>
        <param name="info"><span data-ttu-id="519c4-182">包含序列化对象数据的对象。</span><span class="sxs-lookup"><span data-stu-id="519c4-182">The object that holds the serialized object data.</span></span></param>
        <param name="context"><span data-ttu-id="519c4-183">与源或目标有关的上下文信息。</span><span class="sxs-lookup"><span data-stu-id="519c4-183">The contextual information about the source or destination.</span></span></param>
        <summary><span data-ttu-id="519c4-184">使用序列化数据初始化 <see cref="T:System.InvalidCastException" /> 类的新实例。</span><span class="sxs-lookup"><span data-stu-id="519c4-184">Initializes a new instance of the <see cref="T:System.InvalidCastException" /> class with serialized data.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="519c4-185">在反序列化期间调用此构造函数以重新构造在流上传输的异常对象。</span><span class="sxs-lookup"><span data-stu-id="519c4-185">This constructor is called during deserialization to reconstitute the exception object transmitted over a stream.</span></span> <span data-ttu-id="519c4-186">有关详细信息，请参阅[XML 和 SOAP 序列化](~/docs/standard/serialization/xml-and-soap-serialization.md)。</span><span class="sxs-lookup"><span data-stu-id="519c4-186">For more information, see [XML and SOAP Serialization](~/docs/standard/serialization/xml-and-soap-serialization.md).</span></span>

 ]]></format>
        </remarks>
        <related type="Article" href="~/docs/standard/serialization/xml-and-soap-serialization.md"><span data-ttu-id="519c4-187">XML 和 SOAP 序列化</span><span class="sxs-lookup"><span data-stu-id="519c4-187">XML and SOAP Serialization</span></span></related>
      </Docs>
    </Member>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public InvalidCastException (string message, Exception innerException);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor(string message, class System.Exception innerException) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.InvalidCastException.#ctor(System.String,System.Exception)" />
      <MemberSignature Language="VB.NET" Value="Public Sub New (message As String, innerException As Exception)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; InvalidCastException(System::String ^ message, Exception ^ innerException);" />
      <MemberSignature Language="F#" Value="new InvalidCastException : string * Exception -&gt; InvalidCastException" Usage="new System.InvalidCastException (message, innerException)" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.10.0</AssemblyVersion>
        <AssemblyVersion>4.0.20.0</AssemblyVersion>
        <AssemblyVersion>4.1.0.0</AssemblyVersion>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
        <AssemblyVersion>4.2.1.0</AssemblyVersion>
        <AssemblyVersion>4.2.2.0</AssemblyVersion>
        <AssemblyVersion>5.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>mscorlib</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>netstandard</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Parameters>
        <Parameter Name="message" Type="System.String" />
        <Parameter Name="innerException" Type="System.Exception" />
      </Parameters>
      <Docs>
        <param name="message"><span data-ttu-id="519c4-188">用于解释异常原因的错误消息。</span><span class="sxs-lookup"><span data-stu-id="519c4-188">The error message that explains the reason for the exception.</span></span></param>
        <param name="innerException"><span data-ttu-id="519c4-189">引起当前异常的异常。</span><span class="sxs-lookup"><span data-stu-id="519c4-189">The exception that is the cause of the current exception.</span></span> <span data-ttu-id="519c4-190">如果 <paramref name="innerException" /> 参数不为 <see langword="null" />，则当前异常将在处理内部异常的 <see langword="catch" /> 块中引发。</span><span class="sxs-lookup"><span data-stu-id="519c4-190">If the <paramref name="innerException" /> parameter is not <see langword="null" />, the current exception is raised in a <see langword="catch" /> block that handles the inner exception.</span></span></param>
        <summary><span data-ttu-id="519c4-191">使用指定的错误消息和对作为此异常原因的内部异常的引用来初始化 <see cref="T:System.InvalidCastException" /> 类的新实例。</span><span class="sxs-lookup"><span data-stu-id="519c4-191">Initializes a new instance of the <see cref="T:System.InvalidCastException" /> class with a specified error message and a reference to the inner exception that is the cause of this exception.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="519c4-192">作为前一个异常的直接结果引发的异常应在 <xref:System.Exception.InnerException%2A> 属性中包含对前一个异常的引用。</span><span class="sxs-lookup"><span data-stu-id="519c4-192">An exception that is thrown as a direct result of a previous exception should include a reference to the previous exception in the <xref:System.Exception.InnerException%2A> property.</span></span> <span data-ttu-id="519c4-193"><xref:System.Exception.InnerException%2A> 属性返回传递到构造函数中的相同值，或者，如果 <xref:System.Exception.InnerException%2A> 属性不向构造函数提供内部异常值，则返回 `null`。</span><span class="sxs-lookup"><span data-stu-id="519c4-193">The <xref:System.Exception.InnerException%2A> property returns the same value that is passed into the constructor, or returns `null` if the <xref:System.Exception.InnerException%2A> property does not supply the inner exception value to the constructor.</span></span>

 <span data-ttu-id="519c4-194">下表显示了 <xref:System.InvalidCastException> 实例的初始属性值。</span><span class="sxs-lookup"><span data-stu-id="519c4-194">The following table shows the initial property values for an instance of <xref:System.InvalidCastException>.</span></span>

|<span data-ttu-id="519c4-195">属性</span><span class="sxs-lookup"><span data-stu-id="519c4-195">Property</span></span>|<span data-ttu-id="519c4-196">值</span><span class="sxs-lookup"><span data-stu-id="519c4-196">Value</span></span>|
|--------------|-----------|
|<xref:System.Exception.InnerException%2A>|<span data-ttu-id="519c4-197">内部异常引用。</span><span class="sxs-lookup"><span data-stu-id="519c4-197">The inner exception reference.</span></span>|
|<xref:System.Exception.Message%2A>|<span data-ttu-id="519c4-198">错误消息字符串。</span><span class="sxs-lookup"><span data-stu-id="519c4-198">The error message string.</span></span>|

 ]]></format>
        </remarks>
        <altmember cref="T:System.Exception" />
        <related type="Article" href="~/docs/standard/exceptions/index.md"><span data-ttu-id="519c4-199">处理和引发异常</span><span class="sxs-lookup"><span data-stu-id="519c4-199">Handling and Throwing Exceptions</span></span></related>
      </Docs>
    </Member>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public InvalidCastException (string message, int errorCode);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor(string message, int32 errorCode) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.InvalidCastException.#ctor(System.String,System.Int32)" />
      <MemberSignature Language="VB.NET" Value="Public Sub New (message As String, errorCode As Integer)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; InvalidCastException(System::String ^ message, int errorCode);" />
      <MemberSignature Language="F#" Value="new InvalidCastException : string * int -&gt; InvalidCastException" Usage="new System.InvalidCastException (message, errorCode)" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Runtime</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.10.0</AssemblyVersion>
        <AssemblyVersion>4.0.20.0</AssemblyVersion>
        <AssemblyVersion>4.1.0.0</AssemblyVersion>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
        <AssemblyVersion>4.2.1.0</AssemblyVersion>
        <AssemblyVersion>4.2.2.0</AssemblyVersion>
        <AssemblyVersion>5.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>mscorlib</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>netstandard</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Parameters>
        <Parameter Name="message" Type="System.String" Index="0" FrameworkAlternate="dotnet-uwp-10.0;net-5.0;netcore-1.0;netcore-1.1;netcore-2.0;netcore-2.1;netcore-2.2;netcore-3.0;netcore-3.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8;netstandard-1.0;netstandard-1.1;netstandard-1.2;netstandard-1.3;netstandard-1.4;netstandard-1.5;netstandard-1.6;netstandard-2.0;netstandard-2.1;xamarinandroid-7.1;xamarinios-10.8;xamarinmac-3.0" />
        <Parameter Name="errorCode" Type="System.Int32" Index="1" FrameworkAlternate="dotnet-uwp-10.0;net-5.0;netcore-1.0;netcore-1.1;netcore-2.0;netcore-2.1;netcore-2.2;netcore-3.0;netcore-3.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8;netstandard-1.0;netstandard-1.1;netstandard-1.2;netstandard-1.3;netstandard-1.4;netstandard-1.5;netstandard-1.6;netstandard-2.0;netstandard-2.1;xamarinandroid-7.1;xamarinios-10.8;xamarinmac-3.0" />
      </Parameters>
      <Docs>
        <param name="message"><span data-ttu-id="519c4-200">指示所发生异常的原因的消息。</span><span class="sxs-lookup"><span data-stu-id="519c4-200">The message that indicates the reason the exception occurred.</span></span></param>
        <param name="errorCode"><span data-ttu-id="519c4-201">与异常关联的错误代码 (HRESULT) 值。</span><span class="sxs-lookup"><span data-stu-id="519c4-201">The error code (HRESULT) value associated with the exception.</span></span></param>
        <summary><span data-ttu-id="519c4-202">使用指定的消息和错误代码初始化 <see cref="T:System.InvalidCastException" /> 类的新实例。</span><span class="sxs-lookup"><span data-stu-id="519c4-202">Initializes a new instance of the <see cref="T:System.InvalidCastException" /> class with a specified message and error code.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[

## Remarks
 <span data-ttu-id="519c4-203">此构造函数使用 `message` 参数初始化新异常的 <xref:System.Exception.Message%2A?displayProperty=nameWithType> 属性。</span><span class="sxs-lookup"><span data-stu-id="519c4-203">This constructor initializes the <xref:System.Exception.Message%2A?displayProperty=nameWithType> property of the new exception using the `message` parameter.</span></span> <span data-ttu-id="519c4-204">`message` 的内容设计为易于理解。</span><span class="sxs-lookup"><span data-stu-id="519c4-204">The content of `message` is intended to be understood by humans.</span></span> <span data-ttu-id="519c4-205">此构造函数的调用方需要确保此字符串已针对当前系统区域性进行了本地化。</span><span class="sxs-lookup"><span data-stu-id="519c4-205">The caller of this constructor is required to ensure that this string has been localized for the current system culture.</span></span>

 <span data-ttu-id="519c4-206">此构造函数提供可由 <xref:System.InvalidCastException> 类的继承者通过 <xref:System.Exception> 类的 protected <xref:System.Exception.HResult%2A> 属性访问的 HRESULT 值。</span><span class="sxs-lookup"><span data-stu-id="519c4-206">This constructor supplies an HRESULT value that is accessible to inheritors of the <xref:System.InvalidCastException> class, via the protected <xref:System.Exception.HResult%2A> property of the <xref:System.Exception> class.</span></span>

 <span data-ttu-id="519c4-207">下表显示了 <xref:System.InvalidCastException> 实例的初始属性值。</span><span class="sxs-lookup"><span data-stu-id="519c4-207">The following table shows the initial property values for an instance of <xref:System.InvalidCastException>.</span></span>

|<span data-ttu-id="519c4-208">属性</span><span class="sxs-lookup"><span data-stu-id="519c4-208">Property</span></span>|<span data-ttu-id="519c4-209">值</span><span class="sxs-lookup"><span data-stu-id="519c4-209">Value</span></span>|
|--------------|-----------|
|<xref:System.Exception.InnerException%2A>|<span data-ttu-id="519c4-210">空引用（在 Visual Basic 中为 `Nothing`）。</span><span class="sxs-lookup"><span data-stu-id="519c4-210">A null reference (`Nothing` in Visual Basic).</span></span>|
|<xref:System.Exception.Message%2A>|<span data-ttu-id="519c4-211">错误消息字符串。</span><span class="sxs-lookup"><span data-stu-id="519c4-211">The error message string.</span></span>|

 ]]></format>
        </remarks>
      </Docs>
    </Member>
  </Members>
</Type>
