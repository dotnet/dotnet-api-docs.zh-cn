<Type Name="SessionPageStatePersister" FullName="System.Web.UI.SessionPageStatePersister">
  <Metadata><Meta Name="ms.openlocfilehash" Value="e960b04ce09a8b98b6b6bb798334348fcbb39374" /><Meta Name="ms.sourcegitcommit" Value="c982ad9e10a242d90f1e631b5981570f9e5d9f34" /><Meta Name="ms.translationtype" Value="MT" /><Meta Name="ms.contentlocale" Value="zh-CN" /><Meta Name="ms.lasthandoff" Value="09/10/2020" /><Meta Name="ms.locfileid" Value="89811465" /></Metadata><TypeSignature Language="C#" Value="public class SessionPageStatePersister : System.Web.UI.PageStatePersister" />
  <TypeSignature Language="ILAsm" Value=".class public auto ansi beforefieldinit SessionPageStatePersister extends System.Web.UI.PageStatePersister" />
  <TypeSignature Language="DocId" Value="T:System.Web.UI.SessionPageStatePersister" />
  <TypeSignature Language="VB.NET" Value="Public Class SessionPageStatePersister&#xA;Inherits PageStatePersister" />
  <TypeSignature Language="C++ CLI" Value="public ref class SessionPageStatePersister : System::Web::UI::PageStatePersister" />
  <TypeSignature Language="F#" Value="type SessionPageStatePersister = class&#xA;    inherit PageStatePersister" />
  <AssemblyInfo>
    <AssemblyName>System.Web</AssemblyName>
    <AssemblyVersion>2.0.0.0</AssemblyVersion>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <Base>
    <BaseTypeName>System.Web.UI.PageStatePersister</BaseTypeName>
  </Base>
  <Interfaces />
  <Docs>
    <summary><span data-ttu-id="c8018-101">在 Web 服务器上存储 ASP.NET 页视图状态。</span><span class="sxs-lookup"><span data-stu-id="c8018-101">Stores ASP.NET page view state on the Web server.</span></span></summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c8018-102">ASP.NET 页可以将 <xref:System.Web.UI.Page> 状态信息存储在本质上无状态 HTTP 请求和处理和服务任何网页所需的响应之间。</span><span class="sxs-lookup"><span data-stu-id="c8018-102">ASP.NET pages can store <xref:System.Web.UI.Page> state information between the inherently stateless HTTP request and response required to process and serve any Web page.</span></span> <span data-ttu-id="c8018-103">此状态称为 "视图状态"。</span><span class="sxs-lookup"><span data-stu-id="c8018-103">This state is called "view state."</span></span>  
  
 <span data-ttu-id="c8018-104">默认的 ASP.NET 持久性机制是使用类在客户端上存储视图状态 <xref:System.Web.UI.HiddenFieldPageStatePersister> 。</span><span class="sxs-lookup"><span data-stu-id="c8018-104">The default ASP.NET persistence mechanism is to store view state on the client using the <xref:System.Web.UI.HiddenFieldPageStatePersister> class.</span></span> <span data-ttu-id="c8018-105">在一般情况下，使用每个 HTTP 请求和响应来存储视图状态和数据会很好地执行，并且在大型 Web 场方案中非常重要，因为请求的 Web 服务器不重要：页面状态在当前上下文中可用于服务器精确呈现页面。</span><span class="sxs-lookup"><span data-stu-id="c8018-105">Storing view state and data with each HTTP request and response performs well in general and is important in large Web farm scenarios because it does not matter which Web server services the request: the page state is available in the current context for the server to accurately render the page.</span></span>  
  
 <span data-ttu-id="c8018-106">如果对客户端资源有限的小型设备使用页面，或者使用不支持隐藏字段元素的标记语言，则需要将视图状态存储在服务器上。</span><span class="sxs-lookup"><span data-stu-id="c8018-106">In scenarios where pages are served to small devices that have limited client-side resources or use a markup language that does not support a hidden field element, it is required to store view state on the server.</span></span> <span data-ttu-id="c8018-107">多个 ASP.NET 设备页面适配器会重写 `GetStatePersister` 方法，以返回一个 <xref:System.Web.UI.SessionPageStatePersister> 对象，该对象在与客户端关联的 session 对象中存储页面状态。</span><span class="sxs-lookup"><span data-stu-id="c8018-107">Several ASP.NET device page adapters override the `GetStatePersister` method to return a <xref:System.Web.UI.SessionPageStatePersister> object that stores page state on the server in the session object associated with the client.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="c8018-108">下面的代码示例演示如何编写一个 <xref:System.Web.UI.Adapters.PageAdapter> 类来返回类的实例， <xref:System.Web.UI.SessionPageStatePersister> 而不是使用默认类将 <xref:System.Web.UI.HiddenFieldPageStatePersister> 视图状态保存到服务器端会话对象。</span><span class="sxs-lookup"><span data-stu-id="c8018-108">The following code example demonstrates how you can write a <xref:System.Web.UI.Adapters.PageAdapter> class to return an instance of the <xref:System.Web.UI.SessionPageStatePersister> class instead of the default <xref:System.Web.UI.HiddenFieldPageStatePersister> class to save view state to the server-side session object.</span></span>  
  
 [!code-csharp[System.Web.UI.SessionPageStatePersister_1#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.SessionPageStatePersister_1/CS/mypageadapter2.cs#1)]
 [!code-vb[System.Web.UI.SessionPageStatePersister_1#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.SessionPageStatePersister_1/VB/mypageadapter2.vb#1)]  
  
 ]]></format>
    </remarks>
    <altmember cref="T:System.Web.UI.PageStatePersister" />
    <altmember cref="T:System.Web.UI.HiddenFieldPageStatePersister" />
    <altmember cref="T:System.Web.UI.Adapters.PageAdapter" />
  </Docs>
  <Members>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public SessionPageStatePersister (System.Web.UI.Page page);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor(class System.Web.UI.Page page) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.SessionPageStatePersister.#ctor(System.Web.UI.Page)" />
      <MemberSignature Language="VB.NET" Value="Public Sub New (page As Page)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; SessionPageStatePersister(System::Web::UI::Page ^ page);" />
      <MemberSignature Language="F#" Value="new System.Web.UI.SessionPageStatePersister : System.Web.UI.Page -&gt; System.Web.UI.SessionPageStatePersister" Usage="new System.Web.UI.SessionPageStatePersister page" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Parameters>
        <Parameter Name="page" Type="System.Web.UI.Page" />
      </Parameters>
      <Docs>
        <param name="page"><span data-ttu-id="c8018-109">为其创建视图状态持久性机制的 <see cref="T:System.Web.UI.Page" />。</span><span class="sxs-lookup"><span data-stu-id="c8018-109">The <see cref="T:System.Web.UI.Page" /> that the view state persistence mechanism is created for.</span></span></param>
        <summary><span data-ttu-id="c8018-110">初始化 <see cref="T:System.Web.UI.SessionPageStatePersister" /> 类的新实例。</span><span class="sxs-lookup"><span data-stu-id="c8018-110">Initializes a new instance of the <see cref="T:System.Web.UI.SessionPageStatePersister" /> class.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Examples  
 <span data-ttu-id="c8018-111">下面的代码示例演示如何编写一个 <xref:System.Web.UI.Adapters.PageAdapter> 类来返回类的实例 <xref:System.Web.UI.SessionPageStatePersister> ，以将视图状态保存到服务器端会话对象。</span><span class="sxs-lookup"><span data-stu-id="c8018-111">The following code example demonstrates how you can write a <xref:System.Web.UI.Adapters.PageAdapter> class to return an instance of the <xref:System.Web.UI.SessionPageStatePersister> class to save view state to the server-side session object.</span></span>  
  
 [!code-csharp[System.Web.UI.SessionPageStatePersister_1#1](~/samples/snippets/csharp/VS_Snippets_WebNet/System.Web.UI.SessionPageStatePersister_1/CS/mypageadapter2.cs#1)]
 [!code-vb[System.Web.UI.SessionPageStatePersister_1#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/System.Web.UI.SessionPageStatePersister_1/VB/mypageadapter2.vb#1)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentException"><span data-ttu-id="c8018-112"><see cref="T:System.Web.SessionState.HttpSessionState" /> 为空引用（在 Visual Basic 中为 <see langword="Nothing" />）。</span><span class="sxs-lookup"><span data-stu-id="c8018-112">The <see cref="T:System.Web.SessionState.HttpSessionState" /> is null (<see langword="Nothing" /> in Visual Basic)</span></span></exception>
      </Docs>
    </Member>
    <Member MemberName="Load">
      <MemberSignature Language="C#" Value="public override void Load ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig virtual instance void Load() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.SessionPageStatePersister.Load" />
      <MemberSignature Language="VB.NET" Value="Public Overrides Sub Load ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; override void Load();" />
      <MemberSignature Language="F#" Value="override this.Load : unit -&gt; unit" Usage="sessionPageStatePersister.Load " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="c8018-113">在 <see cref="T:System.Web.UI.Page" /> 对象对其控件层次结构进行初始化时，对服务器端会话对象中保存的状态进行反序列化并加载该状态。</span><span class="sxs-lookup"><span data-stu-id="c8018-113">Deserializes and loads persisted state from the server-side session object when a <see cref="T:System.Web.UI.Page" /> object initializes its control hierarchy.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c8018-114"><xref:System.Web.UI.SessionPageStatePersister>类实现 <xref:System.Web.UI.SessionPageStatePersister.Load%2A> 方法，以便从 <xref:System.Web.SessionState.HttpSessionState> 与客户端关联的对象加载页状态。</span><span class="sxs-lookup"><span data-stu-id="c8018-114">The <xref:System.Web.UI.SessionPageStatePersister> class implements the <xref:System.Web.UI.SessionPageStatePersister.Load%2A> method to load page state from the <xref:System.Web.SessionState.HttpSessionState> object associated with the client.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.Web.HttpException"><span data-ttu-id="c8018-115"><see cref="M:System.Web.UI.SessionPageStatePersister.Load" /> 方法未能成功对向 Web 服务器发送的请求中包含的状态进行反序列化。</span><span class="sxs-lookup"><span data-stu-id="c8018-115">The <see cref="M:System.Web.UI.SessionPageStatePersister.Load" /> method could not successfully deserialize the state contained in the request to the Web server.</span></span></exception>
        <altmember cref="M:System.Web.UI.SessionPageStatePersister.Save" />
      </Docs>
    </Member>
    <Member MemberName="Save">
      <MemberSignature Language="C#" Value="public override void Save ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig virtual instance void Save() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.SessionPageStatePersister.Save" />
      <MemberSignature Language="VB.NET" Value="Public Overrides Sub Save ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; override void Save();" />
      <MemberSignature Language="F#" Value="override this.Save : unit -&gt; unit" Usage="sessionPageStatePersister.Save " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="c8018-116">对 <see cref="P:System.Web.UI.PageStatePersister.ViewState" /> 或 <see cref="P:System.Web.UI.PageStatePersister.ControlState" /> 属性中包含的任何对象状态进行序列化，并将该状态写入会话对象。</span><span class="sxs-lookup"><span data-stu-id="c8018-116">Serializes any object state contained in the <see cref="P:System.Web.UI.PageStatePersister.ViewState" /> or the <see cref="P:System.Web.UI.PageStatePersister.ControlState" /> property and writes the state to the session object.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="c8018-117"><xref:System.Web.UI.SessionPageStatePersister>类实现 <xref:System.Web.UI.HiddenFieldPageStatePersister.Save%2A> 方法，以便在 <xref:System.Web.SessionState.HttpSessionState> 与客户端关联的对象中保持页状态。</span><span class="sxs-lookup"><span data-stu-id="c8018-117">The <xref:System.Web.UI.SessionPageStatePersister> class implements the <xref:System.Web.UI.HiddenFieldPageStatePersister.Save%2A> method to persist page state in the <xref:System.Web.SessionState.HttpSessionState> object associated with the client.</span></span>  
  
 ]]></format>
        </remarks>
        <altmember cref="M:System.Web.UI.SessionPageStatePersister.Load" />
      </Docs>
    </Member>
  </Members>
</Type>
